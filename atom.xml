<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>大圣博客</title>
  <subtitle>&lt;img src=&quot;/logo.png&quot; style=&quot;width:50px;height:60px;&quot;&gt;</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://webbHou.github.io/"/>
  <updated>2018-03-06T10:03:29.828Z</updated>
  <id>http://webbHou.github.io/</id>
  
  <author>
    <name>webbHou</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>mvvm框架原理</title>
    <link href="http://webbHou.github.io/2018/03/06/mvvm%E6%A1%86%E6%9E%B6%E5%8E%9F%E7%90%86/"/>
    <id>http://webbHou.github.io/2018/03/06/mvvm框架原理/</id>
    <published>2018-03-06T09:35:45.000Z</published>
    <updated>2018-03-06T10:03:29.828Z</updated>
    
    <content type="html"><![CDATA[<p>最近几年前端技术层出不穷，行业生态和技术创新形式一片大好，涌现出了一大批框架、ui库、构建工具等，前端变得越来越不可替代，在公司的地位也越来越重要，工作内容页越来越有趣和技术性。当然也有坏的一面，层出不穷的技术当然会让很大一批人迷茫和不知从何学起，但随之慢慢的沉淀，更好的技术慢慢的被大家所接受和运用，react、vue等mvvm现在已经成为了一个前端er必须了解的东西，以下将从原理上对mvvm框架进行解析。</p>
<h3 id="什么是mvvm"><a href="#什么是mvvm" class="headerlink" title="什么是mvvm"></a>什么是mvvm</h3><p>m即modle模型逻辑层，v即view视图层。mvvm体现了这个框架的运行原理，也就是模型驱动视图，视图的改变更改模型。也就是双向数据绑定的核心。</p>
<h3 id="双向数据绑定的原理"><a href="#双向数据绑定的原理" class="headerlink" title="双向数据绑定的原理"></a>双向数据绑定的原理</h3><p>vue主要运用了原生得Object.defindproperty()方法进行data数据的getter和setter,然后追踪依赖,当数据发生改变时,发布通知给订阅者,然后通过computed进行计算后,生成新的虚拟dom，然后通过diff算法进行新老视图的对比，然后进行视图的更新。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">function</span> Vue(opts)&#123;</div><div class="line">        this.data =opts.data;</div><div class="line">        this.el =opts.el;</div><div class="line">        var data = this.data;</div><div class="line">        var me = this;</div><div class="line">        var el = document.querySelector(this.el);</div><div class="line">        observer(data,this);      </div><div class="line">        var dom =  nodeToFragment(el,this);</div><div class="line">        el.appendChild(dom);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">function</span> nodeToFragment(node,vm)&#123;</div><div class="line">        var frag = document.createDocumentFragment();</div><div class="line">        var child;</div><div class="line">        <span class="keyword">while</span>(child = node.firstChild)&#123;</div><div class="line">            complie(child,vm);</div><div class="line">            frag.append(child);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">return</span> frag;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">function</span> complie(node,vm)&#123;</div><div class="line">        var reg = /\&#123;\&#123;(.*)\&#125;\&#125;/;</div><div class="line">        <span class="keyword">if</span>(node.nodeType == 1)&#123;</div><div class="line">            var attrs = node.attributes;</div><div class="line">            <span class="keyword">for</span>(var i = 0,len = attrs.length;i &lt; len;i++)&#123;</div><div class="line">                <span class="keyword">if</span>(attrs[i].nodeName == <span class="string">'v-model'</span>)&#123;</div><div class="line">                    var name =attrs[i].nodeValue;</div><div class="line">                    node.addEventListener(<span class="string">'input'</span>,<span class="keyword">function</span>(e)&#123;</div><div class="line">                        vm[name] = e.target.value;</div><div class="line">                    &#125;)</div><div class="line">                    node.value = vm[name];</div><div class="line">                    node.removeAttribute(<span class="string">'v-model'</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            new watch(vm,node,name,<span class="string">'input'</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(node.nodeType ==3)&#123;</div><div class="line">            <span class="keyword">if</span>(reg.test(node.nodeValue))&#123;</div><div class="line">                var name = RegExp.<span class="variable">$1</span>;</div><div class="line">                name = name.trim();</div><div class="line">                nodeType = <span class="string">'text'</span>;</div><div class="line">                new watch(vm,node,name,<span class="string">'text'</span>)</div><div class="line">            &#125;         </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">function</span> watch(vm,node,name,nodeType)&#123;</div><div class="line">        Dep.target = this;</div><div class="line">        this.name = name;</div><div class="line">        this.node = node;</div><div class="line">        this.vm = vm;</div><div class="line">        this.nodeType = nodeType;</div><div class="line">        this.update();</div><div class="line">        Dep.target = null;</div><div class="line">    &#125;</div><div class="line">    watch.prototype = &#123;</div><div class="line">        update:<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">            this.get();</div><div class="line">            <span class="keyword">if</span>(this.nodeType == <span class="string">'text'</span>)&#123;</div><div class="line">                this.node.nodeValue = this.value;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(this.nodeType == <span class="string">'input'</span>)&#123;</div><div class="line">                this.node.value = this.value;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        get:<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">            this.value = this.vm[this.name];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    //observer</div><div class="line">    <span class="keyword">function</span> observer(data,vm)&#123;</div><div class="line">        Object.keys(data).forEach(<span class="keyword">function</span>(key)&#123;</div><div class="line">            defineReactive(vm,key,data[key]);</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">function</span> defineReactive(vm,key,val)&#123;</div><div class="line">        var dep = new Dep();</div><div class="line">        Object.defineProperty(vm,key,&#123;</div><div class="line">            get:<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">                <span class="keyword">if</span>(Dep.target)&#123;</div><div class="line">                    dep.addSub(Dep.target);</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">return</span> val;</div><div class="line">            &#125;,</div><div class="line">            <span class="built_in">set</span>:<span class="keyword">function</span>(newVal)&#123;</div><div class="line">                <span class="keyword">if</span>(newVal == val) <span class="built_in">return</span>;</div><div class="line">                val = newVal;</div><div class="line">                dep.notify();</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">function</span> <span class="function"><span class="title">Dep</span></span>()&#123;</div><div class="line">        this.subs = [];</div><div class="line">    &#125;</div><div class="line">    Dep.prototype = &#123;</div><div class="line">        addSub:<span class="keyword">function</span>(sub)&#123;</div><div class="line">            this.subs.push(sub);</div><div class="line">        &#125;,</div><div class="line">        notify:<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">            this.subs.forEach(<span class="keyword">function</span>(sub)&#123;</div><div class="line">                sub.update();</div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    var vm = new Vue(&#123;</div><div class="line">        el:<span class="string">'#app'</span>,</div><div class="line">        data:&#123;</div><div class="line">            <span class="string">'msg'</span>:<span class="string">'hello duanduan'</span></div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="diff算法"><a href="#diff算法" class="headerlink" title="diff算法"></a>diff算法</h3><p>diff 的实现主要通过两个方法，patchVnode 与 updateChildren 。<br>patchVnode 有两个参数，分别是老节点 oldVnode, 新节点 vnode 。主要分五种情况：</p>
<p>if (oldVnode === vnode)，他们的引用一致，可以认为没有变化。<br>if(oldVnode.text !== null &amp;&amp; vnode.text !== null &amp;&amp; oldVnode.text !== vnode.text)，文本节点的比较，需要修改，则会调用Node.textContent = vnode.text。<br>if( oldCh &amp;&amp; ch &amp;&amp; oldCh !== ch ), 两个节点都有子节点，而且它们不一样，这样我们会调用 updateChildren 函数比较子节点，这是diff的核心，后边会讲到。<br>if (ch)，只有新的节点有子节点，调用createEle(vnode)，vnode.el已经引用了老的dom节点，createEle函数会在老dom节点上添加子节点。<br>if (oldCh)，新节点没有子节点，老节点有子节点，直接删除老节点。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近几年前端技术层出不穷，行业生态和技术创新形式一片大好，涌现出了一大批框架、ui库、构建工具等，前端变得越来越不可替代，在公司的地位也越来越重要，工作内容页越来越有趣和技术性。当然也有坏的一面，层出不穷的技术当然会让很大一批人迷茫和不知从何学起，但随之慢慢的沉淀，更好的技
    
    </summary>
    
      <category term="js常见问题" scheme="http://webbHou.github.io/categories/js%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    
    
      <category term="javascript" scheme="http://webbHou.github.io/tags/javascript/"/>
    
      <category term="mvvm" scheme="http://webbHou.github.io/tags/mvvm/"/>
    
      <category term="框架" scheme="http://webbHou.github.io/tags/%E6%A1%86%E6%9E%B6/"/>
    
  </entry>
  
  <entry>
    <title>移动端适配1px问题解决方案</title>
    <link href="http://webbHou.github.io/2018/03/06/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D1px%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <id>http://webbHou.github.io/2018/03/06/移动端适配1px问题解决方案/</id>
    <published>2018-03-06T08:33:46.000Z</published>
    <updated>2018-03-06T09:14:56.859Z</updated>
    
    <content type="html"><![CDATA[<p>在之前的一个项目中,在测试后发现,在Retina屏幕下边框变宽了,经过我自己检查修改,发现确实存在这个问题,一下对这个问题进行剖析和解决方案的总结:</p>
<h3 id="边框变粗的原因"><a href="#边框变粗的原因" class="headerlink" title="边框变粗的原因"></a>边框变粗的原因</h3><p>其实这个问题是因为不同手机的分辨率不同造成的,也就是设备物理像素和逻辑像素的不同造成的,物理像素也就是也就是设备的分辨率,逻辑像素就是设备的尺寸像素。在window对象下有一个deviceRatio的属性,这个值就是物理像素和逻辑像素的比值。当这个值大于1时就成为Retina屏。css中的1px在设备中显示时就会等比例的加粗。</p>
<blockquote>
<p>devicePixelRatio的官方的定义为：设备物理像素和设备独立像素的比例，也就是 devicePixelRatio = 物理像素 / 独立像素。</p>
</blockquote>
<h3 id="解决边框变粗的7种办法"><a href="#解决边框变粗的7种办法" class="headerlink" title="解决边框变粗的7种办法"></a>解决边框变粗的7种办法</h3><p>1、0.5px边框: 解决方案是通过 JavaScript 检测浏览器能否处理0.5px的边框，如果可以，给html标签元素添加个class。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (window.devicePixelRatio &amp;&amp; devicePixelRatio &gt;= 2) &#123;</div><div class="line">  var testElem = document.createElement(<span class="string">'div'</span>);</div><div class="line">  testElem.style.border = <span class="string">'.5px solid transparent'</span>;</div><div class="line">  document.body.appendChild(testElem);</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> (testElem.offsetHeight == 1) &#123;</div><div class="line">  document.querySelector(<span class="string">'html'</span>).classList.add(<span class="string">'hairlines'</span>);</div><div class="line">&#125;</div><div class="line">  document.body.removeChild(testElem);</div><div class="line">&#125;</div><div class="line">// 脚本应该放在内，如果在里面运行，需要包装 $(document).ready(<span class="function"><span class="title">function</span></span>() &#123;&#125;)</div></pre></td></tr></table></figure>
<p>样式代码:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">div &#123;</div><div class="line">  border: 1px solid <span class="comment">#bbb;</span></div><div class="line">&#125;</div><div class="line">.hairlines div &#123;</div><div class="line">  border-width: 0.5px;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>优点: 代码简单  缺点: 无法兼容安卓设备、 iOS 8 以下设备。</p>
<p>2.使用border-image实现</p>
<p>样式设置<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">.border-bottom-1px &#123;</div><div class="line">  border-width: 0 0 1px 0;</div><div class="line">  -webkit-border-image: url(linenew.png) 0 0 2 0 stretch;</div><div class="line">  border-image: url(linenew.png) 0 0 2 0 stretch;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>但是会在非Retina屏下不显示的情况,做了以下潘丹处理:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">.border-image-1px &#123;</div><div class="line">  border-bottom: 1px solid <span class="comment">#666;</span></div><div class="line">&#125;</div><div class="line">@media only screen and (-webkit-min-device-pixel-ratio: 2) &#123;</div><div class="line">  .border-image-1px &#123;</div><div class="line">    border-bottom: none;</div><div class="line">    border-width: 0 0 1px 0;</div><div class="line">    -webkit-border-image: url(../img/linenew.png) 0 0 2 0 stretch;</div><div class="line">    border-image: url(../img/linenew.png) 0 0 2 0 stretch;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>优点：<br>可以设置单条,多条边框<br>没有性能瓶颈的问题</p>
<p>缺点：<br>修改颜色麻烦, 需要替换图片<br>圆角需要特殊处理，并且边缘会模糊</p>
<p>3.使用background-image实现</p>
<p>和border-image的原理相同</p>
<p>4.多背景渐变</p>
<p>与background-image方案类似，只是将图片替换为css3渐变。设置1px的渐变背景，50%有颜色，50%透明。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">.background-gradient-1px &#123;</div><div class="line">  background:</div><div class="line">    linear-gradient(<span class="comment">#000, #000 100%, transparent 100%) left / 1px 100% no-repeat,</span></div><div class="line">    linear-gradient(<span class="comment">#000, #000 100%, transparent 100%) right / 1px 100% no-repeat,</span></div><div class="line">    linear-gradient(<span class="comment">#000,#000 100%, transparent 100%) top / 100% 1px no-repeat,</span></div><div class="line">    linear-gradient(<span class="comment">#000,#000 100%, transparent 100%) bottom / 100% 1px no-repeat</span></div><div class="line">&#125;</div><div class="line">/* 或者 */</div><div class="line">.background-gradient-1px&#123;</div><div class="line">  background:</div><div class="line">    -webkit-gradient(linear, left top, right bottom, color-stop(0, transparent), color-stop(0, <span class="comment">#000), to(#000)) left / 1px 100% no-repeat,</span></div><div class="line">    -webkit-gradient(linear, left top, right bottom, color-stop(0, transparent), color-stop(0, <span class="comment">#000), to(#000)) right / 1px 100% no-repeat,</span></div><div class="line">    -webkit-gradient(linear, left top, right bottom, color-stop(0, transparent), color-stop(0, <span class="comment">#000), to(#000)) top / 100% 1px no-repeat,</span></div><div class="line">    -webkit-gradient(linear, left top, right bottom, color-stop(0, transparent), color-stop(0, <span class="comment">#000), to(#000)) bottom / 100% 1px no-repeat</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>优点：<br>可以实现单条、多条边框<br>边框的颜色随意设置</p>
<p>缺点：<br>代码量不少<br>圆角没法实现<br>多背景图片有兼容性问题</p>
<p>5.使用box-shadow模拟边框</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.box-shadow-1px &#123;</div><div class="line">  box-shadow: inset 0px -1px 1px -1px <span class="comment">#c8c7cc;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>优点：代码量少可以满足所有场景<br>缺点：边框有阴影，颜色变浅</p>
<p>6.viewport + rem 实现</p>
<p>通过js获取设备的devicePixelRatio值，来设置对应viewport属性值，然后设置不同的rem转化比例，这种方式就可以像以前一样轻松愉快的写1px了。</p>
<p>这种兼容方案相对比较完美，适合新的项目，老的项目修改成本过大。可以看下<a href="https://github.com/amfe/article/issues/17" target="_blank" rel="external">淘宝的flexible适配方案</a>。</p>
<p>7.伪类 + transform 实现</p>
<p>老项目可以使用这个方案</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">.scale-1px&#123;</div><div class="line">  position: relative;</div><div class="line">  border:none;</div><div class="line">&#125;</div><div class="line">.scale-1px:after&#123;</div><div class="line">  content: <span class="string">''</span>;</div><div class="line">  position: absolute;</div><div class="line">  bottom: 0;</div><div class="line">  background: <span class="comment">#000;</span></div><div class="line">  width: 100%;</div><div class="line">  height: 1px;</div><div class="line">  -webkit-transform: scaleY(0.5);</div><div class="line">  transform: scaleY(0.5);</div><div class="line">  -webkit-transform-origin: 0 0;</div><div class="line">  transform-origin: 0 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在之前的一个项目中,在测试后发现,在Retina屏幕下边框变宽了,经过我自己检查修改,发现确实存在这个问题,一下对这个问题进行剖析和解决方案的总结:&lt;/p&gt;
&lt;h3 id=&quot;边框变粗的原因&quot;&gt;&lt;a href=&quot;#边框变粗的原因&quot; class=&quot;headerlink&quot; tit
    
    </summary>
    
      <category term="移动端" scheme="http://webbHou.github.io/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
    
      <category term="移动端" scheme="http://webbHou.github.io/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
      <category term="适配" scheme="http://webbHou.github.io/tags/%E9%80%82%E9%85%8D/"/>
    
  </entry>
  
  <entry>
    <title>nginx下405notallowed的几种解决办法</title>
    <link href="http://webbHou.github.io/2018/02/05/nginx%E4%B8%8B405notallowed%E7%9A%84%E5%87%A0%E7%A7%8D%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
    <id>http://webbHou.github.io/2018/02/05/nginx下405notallowed的几种解决办法/</id>
    <published>2018-02-05T02:49:35.000Z</published>
    <updated>2018-02-05T07:15:48.323Z</updated>
    
    <content type="html"><![CDATA[<p>接近年底,闲来无事,刚好在网上看到一个https的帖子,https现在已经成为潮流,就想着闲来无事不如把自己以前的一些项目也都部署转成https的.从https证书部署到nginx代理配置再到成功看到浏览器中的小锁头一切都顺利的走了下来,心里想着https配置也挺简单嘛,结果直到几天后某一天,终于发生了一件大事……好了,不乱扯了,开始正题:</p>
<p>今天在无意间测试一个项目的上传功能时发现,当用post方式去请求一个静态文件时，会报错,返回 HTTP/1.1 405 Method not allowed 状态，无法正常显示页面。 </p>
<p>最终经过本人不懈的百度 google后,采集了各方意见,逐一测试后解决了这个bug,这里贴出我测试的几个方法,是否有用,以实际代码为准,下面我会逐各进行原理说明:</p>
<h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><blockquote>
<p>server<br>{<br>   listen       80;<br>   server_name  test.baidu.com;<br>   index index.html index.htm index.php;<br>   root  /www/test.baidu.com;<br>   error_page   405 =200 @405;<br>   location @405<br>   {<br>       root  /www/test.baidu.com;<br>   }<br>  location ~ .*.php?$<br>   {<br>       include conf/fcgi.conf;<br>       fastcgi_pass  127.0.0.1:9000;<br>       fastcgi_index index.php;<br>   }<br>}</p>
</blockquote>
<p>方法一主要利用了nginx的代理转发,把错误码405 notallowed 转发到200 然后完成正常的post请求,这其实也是对浏览器的一种欺骗.</p>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>编辑nginx源代码<br>vi /root/soft/nginx1.0.10/src/http/modules/ngx_http_static_module.c</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">注释掉原有的一段话</div><div class="line">/*   </div><div class="line"> <span class="keyword">if</span> (r-&gt;method &amp; NGX_HTTP_POST) &#123;</div><div class="line">        <span class="built_in">return</span> NGX_HTTP_NOT_ALLOWED;</div><div class="line">       &#125;</div><div class="line">*/</div></pre></td></tr></table></figure>
<p>然后按照原来的编译参数  ./configuer  make  不用make install 否则会覆盖原来的一些配置文件。<br>执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cp  <span class="variable">$nginx_dir</span>/sbin/nginx  <span class="variable">$nginx_dir</span>/sbin/nginx.bak</div><div class="line">cp ./objs/nginx   <span class="variable">$nginx_dir</span>/sbin/nginx</div><div class="line"><span class="variable">$nginx_dir</span>/sbin/nginx -s reload</div></pre></td></tr></table></figure>
<p>方法二主要利用了对nginx源码的编辑,修改了nginx原有的post禁止的机制,进而避免了405 not allowed的状态.</p>
<h3 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h3><blockquote>
<p>server<br>{<br>   listen       80;<br>   server_name  test.baidu.com;<br>   index index.html index.htm index.php;<br>   root  /www/test.baidu.com;<br>     location /<br>    {<br>      root /www/test.baidu.com;<br>      error_page 405 =200 <a href="http://$host$request_uri" target="_blank" rel="external">http://$host$request_uri</a>;<br>      }<br>      location ~ .*.php?$<br>   {<br>       include conf/fcgi.conf;<br>       fastcgi_pass  127.0.0.1:9000;<br>       fastcgi_index index.php;<br>   }<br>}</p>
</blockquote>
<p>方法三和方法一原理类似,都是把错误码405 notallowed 转发到200 然后完成正常的post请求.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;接近年底,闲来无事,刚好在网上看到一个https的帖子,https现在已经成为潮流,就想着闲来无事不如把自己以前的一些项目也都部署转成https的.从https证书部署到nginx代理配置再到成功看到浏览器中的小锁头一切都顺利的走了下来,心里想着https配置也挺简单嘛,结
    
    </summary>
    
      <category term="开发相关" scheme="http://webbHou.github.io/categories/%E5%BC%80%E5%8F%91%E7%9B%B8%E5%85%B3/"/>
    
    
      <category term="javascript" scheme="http://webbHou.github.io/tags/javascript/"/>
    
      <category term="nginx" scheme="http://webbHou.github.io/tags/nginx/"/>
    
      <category term="https" scheme="http://webbHou.github.io/tags/https/"/>
    
  </entry>
  
  <entry>
    <title>2017年度工作总结</title>
    <link href="http://webbHou.github.io/2018/01/04/2017/"/>
    <id>http://webbHou.github.io/2018/01/04/2017/</id>
    <published>2018-01-04T09:02:16.000Z</published>
    <updated>2018-01-05T00:55:12.830Z</updated>
    
    <content type="html"><![CDATA[<p>2017年是我人生中重要的转折点,完成了从学校到职场,从学生到员工的角色转变.来到公司的大半年里,从思想到心态上历经了一次全面的蜕变,学到了很多,也成长了很多.在此对我半年来的工作状况做一个小结:</p>
<p>1.学无止境 人生就是不断学习的过程，来到公司的这半年来，是我学到东西最多的几个月，从工作能力上到与人交流沟通都学到了好多。</p>
<ul>
<li>工作上我从只想认真做前端技术现在慢慢发展到明白了前后端之间的联系和耦合，对公司业务更加的熟悉，了解了各部门之间的工作关系，自己在公司的职责以及个人岗位的重要性。</li>
<li>人际交往中，慢慢的在学着如何更清楚的的与人交流，表达自己的看法，让别人更快地明白你的意图或疑惑，不仅加强了和同事之间的工作效率，更锻炼了自己的性格，前端本就是需要不断与人沟通的岗位，也为以后个人职业发展做好铺垫。</li>
</ul>
<p>2.即使是最基础的工作，也需要不断地创新求进，以提高工作效率</p>
<ul>
<li>变繁琐为简单 作为技术来说，我们不喜欢简单的粘贴复制，更不喜欢每天总是重复繁琐的工作，我们更喜欢用技术来改变这一切，这半年来我们在不断的改进，把每次的上下线活动变得简单，把每次活动的弹窗修改变为即使不懂代码也可以操作的可视化界面，这些改变是让人欣喜的，技术最怕的就是一成不变，那样终有一天会磨光仅有的那些对技术对代码的热爱。</li>
<li>更新迭代 来公司的半年里，我慢慢的了解了公司的技术栈，但发现大部分都是很老的，有很多需要改进，需要用新的更优秀的解决方案来代替，让用户体验更佳，让公司与外界保持同步，以此来吸引更多的优秀人才加入进来，公司才能更加壮大。基于这一点，每当我学习到新的技术，总是在想是否对现有的公司项目适用，让项目体验性更佳，带来更多的流量和用户，例如这半年里我使用了淘宝的flexable移动端适配插件让活动在移动端的显示更佳，更佳美观，用户体验性更好。</li>
</ul>
<p>2018年里，我希望能更加成熟和稳重，每一天做到认真和严谨，完成好每一项工作，不管它是否简单或复杂，学习更多的新技术，扎实基本功，更好的为公司服务。最后用自己最喜欢的一句话来结束，“以匠人之心，码出多彩人生！”</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;2017年是我人生中重要的转折点,完成了从学校到职场,从学生到员工的角色转变.来到公司的大半年里,从思想到心态上历经了一次全面的蜕变,学到了很多,也成长了很多.在此对我半年来的工作状况做一个小结:&lt;/p&gt;
&lt;p&gt;1.学无止境 人生就是不断学习的过程，来到公司的这半年来，是我
    
    </summary>
    
      <category term="个人总结" scheme="http://webbHou.github.io/categories/%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="2017" scheme="http://webbHou.github.io/tags/2017/"/>
    
      <category term="总结" scheme="http://webbHou.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>前端性能优化</title>
    <link href="http://webbHou.github.io/2017/12/20/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    <id>http://webbHou.github.io/2017/12/20/前端性能优化/</id>
    <published>2017-12-20T02:23:51.000Z</published>
    <updated>2018-03-07T01:07:16.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="合并请求"><a href="#合并请求" class="headerlink" title="合并请求"></a>合并请求</h4><p>合理的http/htpps请求会减少对后台服务器的压力,提升页面的性能.</p>
<h3 id="雪碧图"><a href="#雪碧图" class="headerlink" title="雪碧图"></a>雪碧图</h3><p>也相当于合并请求的一种,减少对图片的请求,尽量合并在一张大图进行请求</p>
<h3 id="事件代理"><a href="#事件代理" class="headerlink" title="事件代理"></a>事件代理</h3><h3 id="代码压缩合并"><a href="#代码压缩合并" class="headerlink" title="代码压缩合并"></a>代码压缩合并</h3><h3 id="合理利用插件库"><a href="#合理利用插件库" class="headerlink" title="合理利用插件库"></a>合理利用插件库</h3><p>以上其实这是前端的部分方法,总的来说性能优化分为两个部分,页面加载时间和页面运行效率。</p>
<h3 id="页面加载时间"><a href="#页面加载时间" class="headerlink" title="页面加载时间"></a>页面加载时间</h3><p>首先我们需要知道一个页面从浏览器打开到加载完成都发生了什么，才能知道如何优化和改进。</p>
<p>总共为以下几步:<br>浏览器请求-&gt;查询缓存-&gt;dns解析-&gt;建立连接-&gt;发送请求-&gt;服务器处理请求-&gt;服务器发送响应-&gt;浏览器进行页面渲染-&gt;用户可交互-&gt;加载完成</p>
<p>前面说的几种方法主要体现在服务器处理请求和发送响应这两步,其他如dns解析可以通过cdn加速进行优化处理,当然还需要后台对服务器端进行优化。</p>
<h3 id="页面运行效率"><a href="#页面运行效率" class="headerlink" title="页面运行效率"></a>页面运行效率</h3><p>页面运行效率主要体现在页面的滑动是否卡顿、浏览器运行机制、代码是否逻辑清晰简洁以及硬件相关的问题。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;合并请求&quot;&gt;&lt;a href=&quot;#合并请求&quot; class=&quot;headerlink&quot; title=&quot;合并请求&quot;&gt;&lt;/a&gt;合并请求&lt;/h4&gt;&lt;p&gt;合理的http/htpps请求会减少对后台服务器的压力,提升页面的性能.&lt;/p&gt;
&lt;h3 id=&quot;雪碧图&quot;&gt;&lt;a href=
    
    </summary>
    
      <category term="js常见问题" scheme="http://webbHou.github.io/categories/js%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    
    
      <category term="javascript" scheme="http://webbHou.github.io/tags/javascript/"/>
    
      <category term="优化" scheme="http://webbHou.github.io/tags/%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>vue和react路由参数获取</title>
    <link href="http://webbHou.github.io/2017/11/17/vue%E5%92%8Creact%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0%E8%8E%B7%E5%8F%96/"/>
    <id>http://webbHou.github.io/2017/11/17/vue和react路由参数获取/</id>
    <published>2017-11-17T03:30:20.000Z</published>
    <updated>2017-11-17T03:41:44.662Z</updated>
    
    <content type="html"><![CDATA[<h2 id="vue获取路由参数的方式"><a href="#vue获取路由参数的方式" class="headerlink" title="vue获取路由参数的方式"></a>vue获取路由参数的方式</h2><p>vue可以通过获取当前路由来获取,可以通过路由的监控触发事件来进行数据请求变更<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">this.<span class="variable">$route</span>.params</div><div class="line">watch:&#123;</div><div class="line">  //进行路由的监控触发事件</div><div class="line">  <span class="string">'$route'</span>: <span class="string">'事件名'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="react获取路由参数的方式"><a href="#react获取路由参数的方式" class="headerlink" title="react获取路由参数的方式"></a>react获取路由参数的方式</h2><p>react把路由参数作为prop进行传递,子组件只需要获取当前组件的props即可<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">this.props.params</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;vue获取路由参数的方式&quot;&gt;&lt;a href=&quot;#vue获取路由参数的方式&quot; class=&quot;headerlink&quot; title=&quot;vue获取路由参数的方式&quot;&gt;&lt;/a&gt;vue获取路由参数的方式&lt;/h2&gt;&lt;p&gt;vue可以通过获取当前路由来获取,可以通过路由的监控触发事件
    
    </summary>
    
      <category term="js常见问题" scheme="http://webbHou.github.io/categories/js%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    
    
      <category term="javascript" scheme="http://webbHou.github.io/tags/javascript/"/>
    
      <category term="vue-router" scheme="http://webbHou.github.io/tags/vue-router/"/>
    
      <category term="react-router" scheme="http://webbHou.github.io/tags/react-router/"/>
    
  </entry>
  
  <entry>
    <title>react初学总结</title>
    <link href="http://webbHou.github.io/2017/09/15/react%E5%88%9D%E5%AD%A6%E6%80%BB%E7%BB%93/"/>
    <id>http://webbHou.github.io/2017/09/15/react初学总结/</id>
    <published>2017-09-15T07:04:31.000Z</published>
    <updated>2017-09-15T07:59:18.654Z</updated>
    
    <content type="html"><![CDATA[<h2 id="react的特点"><a href="#react的特点" class="headerlink" title="react的特点"></a>react的特点</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">声明式设计 −React采用声明范式，可以轻松描述应用。</div><div class="line">高效 −React通过对DOM的模拟，最大限度地减少与DOM的交互。性能更佳</div><div class="line">灵活 −React可以与已知的库或框架很好地配合。</div><div class="line">JSX − JSX 是 JavaScript 语法的扩展。React 开发不一定使用 JSX ，但我们建议使用它。</div><div class="line">组件 − 通过 React 构建组件，使得代码更加容易得到复用，能够很好的应用在大项目的开发中。</div><div class="line">单向响应的数据流 − React 实现了单向响应的数据流，从而减少了重复代码，这也是它为什么比传统数据绑定更简单。</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;react的特点&quot;&gt;&lt;a href=&quot;#react的特点&quot; class=&quot;headerlink&quot; title=&quot;react的特点&quot;&gt;&lt;/a&gt;react的特点&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cla
    
    </summary>
    
      <category term="react开发" scheme="http://webbHou.github.io/categories/react%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="javascript" scheme="http://webbHou.github.io/tags/javascript/"/>
    
      <category term="react redux" scheme="http://webbHou.github.io/tags/react-redux/"/>
    
  </entry>
  
  <entry>
    <title>小程序常用操作</title>
    <link href="http://webbHou.github.io/2017/09/13/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/"/>
    <id>http://webbHou.github.io/2017/09/13/小程序常用操作/</id>
    <published>2017-09-13T03:56:25.000Z</published>
    <updated>2017-09-13T08:16:03.552Z</updated>
    
    <content type="html"><![CDATA[<h2 id="小程序业务常用操作"><a href="#小程序业务常用操作" class="headerlink" title="小程序业务常用操作"></a>小程序业务常用操作</h2><h3 id="上拉加载和下拉刷新"><a href="#上拉加载和下拉刷新" class="headerlink" title="上拉加载和下拉刷新:"></a>上拉加载和下拉刷新:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">方法一：onPullDownRefresh和onReachBottom方法实现小程序下拉加载和上拉刷新,在pages页xx.json设置<span class="string">"enablePullDownRefresh"</span>: <span class="string">"true"</span></div><div class="line">方法二：在scroll-view里设定bindscrolltoupper和bindscrolltolower实现微信小程序下拉,绑定自定义方法实现</div></pre></td></tr></table></figure>
<h3 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h3><p>用于和对应的page中的方法绑定<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">方法一：<span class="built_in">bind</span>开头,例如: bindtab点击、bindtouchstart开始滑动、bindblur失去焦点、bindscrolltolower上滑加载</div><div class="line">方法二：catch开头, 例如: catchtab点击、catchblur</div></pre></td></tr></table></figure></p>
<h4 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h4><p>bind事件绑定不会阻止冒泡事件向上冒泡，catch事件绑定可以阻止冒泡事件向上冒泡。</p>
<h3 id="内置方法"><a href="#内置方法" class="headerlink" title="内置方法"></a>内置方法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">wx.request 进行数据请求 参数:Object url:请求路径 method:请求类型 header:请求头 success:请求成功后回调 fail:失败后回调</div><div class="line">wx.previewImage 图片查看 参数:Object current:当前路径 urls:数组 路径列表</div><div class="line">wx.setNavigationBarTitle 设置页面标题 参数:Object title:页面标题</div><div class="line">wx.showNavigationBarLoading 显示正在加载 无实参</div><div class="line">wx.hideNavigationBarLoading 隐藏正在加载 无实参</div><div class="line">wx.stopPullDownRefresh 停止下拉刷新 无实参</div></pre></td></tr></table></figure>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>根目录中的.json文件为全局配置文件，定义应用的标题、背景等属性<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">page 数组 所有的页面必须在此声明</div><div class="line">window 数组 初始配置应用全局的标题、背景等属性,各页面可在后期开发中单独修改设置自己的页面属性</div><div class="line">tabBar Object 配置tab栏的标题、路由、icon，不多于五栏</div></pre></td></tr></table></figure></p>
<h4 id="渲染"><a href="#渲染" class="headerlink" title="渲染"></a>渲染</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">onLaunch 当小程序初始化完成时，会触发 onLaunch（全局只触发一次）</div><div class="line">onShow 当小程序启动，或从后台进入前台显示，会触发 onShow</div><div class="line">onHide 当小程序从前台进入后台，会触发 onHide</div><div class="line">onReady 监听页面初次渲染完成</div><div class="line">onPullDownRefresh 监听用户下拉动作</div><div class="line">onUnload 监听页面卸载</div><div class="line">onShareAppMessage 页面分享方法</div></pre></td></tr></table></figure>
<h3 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">const app = getApp() 获取全局应用程序实例对象</div><div class="line">各页面内适用cmd规范,require进行外部文件加载,import进行模板和样式的复用</div></pre></td></tr></table></figure>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>小程序的数据绑定为伪数据绑定,自动与当前页面js中的date进行绑定.各种标签和方法都为内置和自定义,0基础比较容易上手开发.</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;小程序业务常用操作&quot;&gt;&lt;a href=&quot;#小程序业务常用操作&quot; class=&quot;headerlink&quot; title=&quot;小程序业务常用操作&quot;&gt;&lt;/a&gt;小程序业务常用操作&lt;/h2&gt;&lt;h3 id=&quot;上拉加载和下拉刷新&quot;&gt;&lt;a href=&quot;#上拉加载和下拉刷新&quot; class
    
    </summary>
    
      <category term="小程序" scheme="http://webbHou.github.io/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
      <category term="javascript" scheme="http://webbHou.github.io/tags/javascript/"/>
    
      <category term="小程序" scheme="http://webbHou.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序页面跳转的方式</title>
    <link href="http://webbHou.github.io/2017/09/13/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC%E7%9A%84%E6%96%B9%E5%BC%8F/"/>
    <id>http://webbHou.github.io/2017/09/13/微信小程序页面跳转的方式/</id>
    <published>2017-09-13T02:09:28.000Z</published>
    <updated>2017-09-13T02:19:02.701Z</updated>
    
    <content type="html"><![CDATA[<h2 id="四种跳转方式"><a href="#四种跳转方式" class="headerlink" title="四种跳转方式"></a>四种跳转方式</h2><p>微信小程序页面跳转有四种方式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">wx.navigateTo(OBJECT)； </div><div class="line">wx.redirectTo(OBJECT)； </div><div class="line">wx.switchTab(OBJECT)； </div><div class="line">wx.navigateBack(OBJECT)</div></pre></td></tr></table></figure></p>
<h2 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">其中navigateTo是将原来的页面保存在页面栈中，在跳入到下一个页面的时候目标页面也进栈，只有在这个情况下点击手机的返回按钮才可以跳转到上一个页面；</div><div class="line">redirectTo和switchTab都是先清除栈中原来的页面，然后目标页面进栈，使用这两种跳转方式，都不能通过系统的返回键回到上一个页面，而是直接退出小程序；</div><div class="line">redirectTo使用的时候一定要配合tabBar或是页面里面可以再次跳转按钮，否则无法回到上一个页面；</div><div class="line">switchTab跳转的页面必须是tabBar中声明的页面；</div><div class="line">tabBar中定义的字段不能超过5个页面，小程序的页面栈层次也不能超过5层。</div><div class="line">navigateBack只能返回到页面栈中的指定页面，一般和navigateTo配合使用。</div><div class="line">wx.navigateTo 和 wx.redirectTo 不允许跳转到 tabbar 页面，只能用 wx.switchTab 跳转到 tabbar 页面</div></pre></td></tr></table></figure>
<h2 id="other"><a href="#other" class="headerlink" title="other"></a>other</h2><p>最后一种,使用<navigator>标签实现页面跳转:</navigator></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;navigator url=<span class="string">"navigate?title=navigate"</span> hover-class=<span class="string">"navigator-hover"</span>&gt;跳转到新页面&lt;/navigator&gt;</div><div class="line">&lt;navigator url=<span class="string">"redirect?title=redirect"</span> open-type=<span class="string">"redirect"</span> hover-class=<span class="string">"other-navigator-hover"</span>&gt;在当前页打开&lt;/navigator&gt;</div><div class="line">&lt;navigator url=<span class="string">"index"</span> open-type=<span class="string">"switchTab"</span> hover-class=<span class="string">"other-navigator-hover"</span>&gt;切换 Tab&lt;/navigator&gt;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;四种跳转方式&quot;&gt;&lt;a href=&quot;#四种跳转方式&quot; class=&quot;headerlink&quot; title=&quot;四种跳转方式&quot;&gt;&lt;/a&gt;四种跳转方式&lt;/h2&gt;&lt;p&gt;微信小程序页面跳转有四种方式：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;tab
    
    </summary>
    
      <category term="微信小程序" scheme="http://webbHou.github.io/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
      <category term="javascript" scheme="http://webbHou.github.io/tags/javascript/"/>
    
      <category term="小程序" scheme="http://webbHou.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>移动端返回上一页</title>
    <link href="http://webbHou.github.io/2017/08/31/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%BF%94%E5%9B%9E%E4%B8%8A%E4%B8%80%E9%A1%B5/"/>
    <id>http://webbHou.github.io/2017/08/31/移动端返回上一页/</id>
    <published>2017-08-31T05:24:19.000Z</published>
    <updated>2017-08-31T05:55:26.963Z</updated>
    
    <content type="html"><![CDATA[<h2 id="移动端返回上一页问题"><a href="#移动端返回上一页问题" class="headerlink" title="移动端返回上一页问题"></a>移动端返回上一页问题</h2><p>实际工作中往往有这样的需求,需要返回上一页。</p>
<h3 id="pc"><a href="#pc" class="headerlink" title="pc"></a>pc</h3><p>在pc上我们可以使用window.history.go(-1)或者window.history.back()都可以实现需求,而无需知道上一页的具体url。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a href=<span class="string">"javascript:history.go(-1)"</span> class=<span class="string">"header-back jsBack"</span>&gt;返回&lt;/a&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a href=<span class="string">"javascript:history.back()"</span> class=<span class="string">"header-back jsBack"</span>&gt;返回&lt;/a&gt;</div></pre></td></tr></table></figure>
<h3 id="移动端"><a href="#移动端" class="headerlink" title="移动端"></a>移动端</h3><p>但是在移动端，如果想要返回上一页。比如从A页面跳到B页面，如果B页面想返回A页面，为了防止不会跳错，必须要有一个 &lt;  按钮，给它加 history.go(-1) ，返回上一层。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a href=<span class="string">"javascript:history.go(-1)"</span> class=<span class="string">"header-back jsBack"</span>&gt;返回&lt;/a&gt;</div></pre></td></tr></table></figure>
<p>但链接来源错综复杂，往往有些情况下根本没有上一页,这时候点击返回按钮根本没有用,用户体验性很差。很多时候会以为只是一个BUG。</p>
<p>移动端无论是原生app还是传统的网页，返回上页是一个比较强烈的需求。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">javascript 有一个可以获取前一页面的URL地址的方法：document.referrer</div></pre></td></tr></table></figure>
<p>允许客户端通过document.referrer访问http头部来获取当前网页的来源。</p>
<p>根据document.referrer 的来源来判断是否有来源信息，如果来源信息为空，则返回首页：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (typeof document.referrer === <span class="string">''</span>) &#123;</div><div class="line">    // 没有来源页面信息的时候，改成首页URL地址</div><div class="line">    $(<span class="string">'.jsBack'</span>).attr(<span class="string">'href'</span>, <span class="string">'/'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以此来达到返回上一页的效果。</p>
<h3 id="无法获取referrer"><a href="#无法获取referrer" class="headerlink" title="无法获取referrer"></a>无法获取referrer</h3><p>下面的场景无法获得 referrer 信息，以下前8条属于【张鑫旭】：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">直接在浏览器中输入地址</div><div class="line">使用location.reload()刷新（location.href或者location.replace()刷新有信息）</div><div class="line">在微信对话框中，点击进入微信自身浏览器</div><div class="line">扫码进入微信或QQ的浏览器</div><div class="line">直接新窗口打开一个页面</div><div class="line">从https的网站直接进入一个http协议的网站（Chrome下亲测）</div><div class="line">a标签设置rel=<span class="string">"noreferrer"</span>（兼容IE7+）</div><div class="line">meta标签来控制不让浏览器发送referer</div><div class="line">点击 flash 内部链接</div><div class="line">Chrome4.0以下，IE 5.5+以下返回空的字符串</div><div class="line">使用 修改 Location 进行页面导航的方法，会导致在IE下丢失 referrer，这可能是IE的一个BUG</div><div class="line">跨域</div><div class="line">&lt;meta content=<span class="string">"never"</span> name=<span class="string">"referrer"</span>&gt;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;移动端返回上一页问题&quot;&gt;&lt;a href=&quot;#移动端返回上一页问题&quot; class=&quot;headerlink&quot; title=&quot;移动端返回上一页问题&quot;&gt;&lt;/a&gt;移动端返回上一页问题&lt;/h2&gt;&lt;p&gt;实际工作中往往有这样的需求,需要返回上一页。&lt;/p&gt;
&lt;h3 id=&quot;pc&quot;
    
    </summary>
    
      <category term="js常见问题" scheme="http://webbHou.github.io/categories/js%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    
    
      <category term="javascript" scheme="http://webbHou.github.io/tags/javascript/"/>
    
      <category term="移动端" scheme="http://webbHou.github.io/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://webbHou.github.io/2017/08/21/hello-world/"/>
    <id>http://webbHou.github.io/2017/08/21/hello-world/</id>
    <published>2017-08-21T10:07:00.455Z</published>
    <updated>2017-08-31T05:55:25.345Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
      <category term="初始化" scheme="http://webbHou.github.io/categories/%E5%88%9D%E5%A7%8B%E5%8C%96/"/>
    
    
      <category term="javascript" scheme="http://webbHou.github.io/tags/javascript/"/>
    
      <category term="vue" scheme="http://webbHou.github.io/tags/vue/"/>
    
      <category term="vuex" scheme="http://webbHou.github.io/tags/vuex/"/>
    
      <category term="hexo" scheme="http://webbHou.github.io/tags/hexo/"/>
    
  </entry>
  
</feed>
