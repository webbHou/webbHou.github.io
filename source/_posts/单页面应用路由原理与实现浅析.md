---
title: 单页面应用路由原理与实现浅析
tags:
  - javascript
categories: js常见问题
date: 2019-05-16 10:15:13
---


在现代前端单页面应用中，路由已经变得越来越必不可少。路由描述了url和UI之间的映射关系，这种映射是单向的，即url的变化引发UI的变化。

#### 如何实现前端路由

  **实现前端路由，需要解决下面两个核心问题**

- 改变url如何使页面不刷新？
- 如何检测url的变化？

#### hash模式实现

- hash是url地址中#及后面的部分，hash值的改变不会导致页面的重载
- 需要来监听hashchange事件来渲染不同的页面组件

#### history模式

- 通过history.pushState/history.replaceState 来进行路由的修改
- 监听popstate来进行不同组件的渲染

#### vuex工作流

1.new vuex.store({
  strtic:true //严格
  state：{ }  //全局唯一
  mutation：{
    add(state,arg){
      state+=1;
    }
  }  //进行state修改
  action：{ //提交action到mutaion
    addAction({commit},arg){
      commit(mutaion名，arg)
    }
  }，
  getter：{ //获取state
    getCount(state){

    }
  }
})

2.页面使用

- 提交action  this.$store.disptch(action名，arg)
- 使用state   this.$store.state

#### vue父子通讯

- props  父->子  $emit/$on
- 新vue实例做中介  $emit/$on
- this.$attrs/$listeners   未继承的属性/方法
- vuex 全局状态共享 this.$store.state

#### vue组件

- watch  自动计算  方法名对应绑定变量名
- comuted：  计算
- method： 方法   手动绑定

#### vue生命周期钩子

- beforeCreate  实例创建前
- created   已被创建
- beforeMount   dom挂载前
- mounted 已挂载  可以获取dom结点
- beforeUpdate  有数据更新前
- updated  已更新
- beforeDestory  摧毁前
- destoryed  被摧毁
