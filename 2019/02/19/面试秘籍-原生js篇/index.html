<!DOCTYPE html>
<html lang="zh-cn">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, shrink-to-fit=no">
    <meta name="referrer" content="origin">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>面试秘籍-原生js篇</title>

    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/LongCang.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/Monda.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/NotoSansSC.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/Playball.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/PTMono.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/RobotoSlab.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/Rosario.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/UbuntuMono.css">

    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/post.css">
    
        <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/normal.css">
    

    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/jquery-3.4.1.min.js"></script>

</head>
<body>
    <a id="cover"></a>
    <div id="header">
    <div class="header">
        <div class="vertical">
            <div class="inner">
                <h1 class="header-subtitle">面试秘籍-原生js篇</h1>
                <div class="header-subinfo">
                    <p class="article-info-text">
                        <span>
                            <i class="iconfont icon-time"></i> 发表时间：2019-02-19
                        </span>
                        
                            <span id="/2019/02/19/面试秘籍-原生js篇/" class="leancloud_visitors" data-flag-title="面试秘籍-原生js篇">
                                <i class="iconfont icon-browse"></i> 阅读：<sapn class="leancloud-visitors-count"></sapn></span>
                            
                        
                        <span>
                            <i class="iconfont icon-interactive"></i> 评论：<span class="valine-comment-count" data-xid="/2019/02/19/面试秘籍-原生js篇/"></span>
                        </span>  
                    </p>                 
                </div>
            </div>
        </div>
        <canvas id="articleHeaderCanvas"></canvas>
    </div>
</div>
    <div id="container">
    <div id="content">
        <div id="article">
    <div class="toc"></div>
    <div class="article-body">
        <h4 id="获取元素位置和大小的方法和区别"><a href="#获取元素位置和大小的方法和区别" class="headerlink" title="获取元素位置和大小的方法和区别"></a>获取元素位置和大小的方法和区别</h4><ul>
<li><p>offset</p>
<ul>
<li>offsetTop：获取元素顶部距离定位父级的距离 元素外边框至定位父级上内边框的距离。外边距+父级上内边距</li>
<li>offsetLeft：获取元素左边距离定位父级的距离 元素外边框至定位父级左内边框的距离。外边距+父级左内边距</li>
<li>offsetWidth/offsetHeight：获取元素在页面上可见的空间大小，不包含隐藏滚动区域 实际宽度 + 左右内边距 + 左右边框</li>
</ul>
</li>
<li><p>client</p>
<ul>
<li>clientLeft/clientTop：实际获取的就是元素的边框宽度</li>
<li>clientWidth/clientHeight：获取元素内容和内边距占的大小 不包含隐藏滚动区域  内容区域+内边距-滚动条宽度</li>
</ul>
</li>
<li><p>scroll</p>
<ul>
<li>scrollLeft和scrollTop：获取当前元素的滚动位置 隐藏在内容区域左侧和上方的像素</li>
<li>scrollWidth和scrollHeight：获取包含滚动内容的元素的大小</li>
</ul>
</li>
<li><p>getBoundClientRect：</p>
<ul>
<li>top/bottom：顶部/底部距离视口上边的距离  height = bottom - top</li>
<li>left/bottom：左侧/右侧距离视口左边的距离  width = right - left</li>
</ul>
</li>
<li><p>getComputedStyle：获取元素样式</p>
<ul>
<li>width/height: 实际宽高 不包含内外边距和边框</li>
</ul>
</li>
</ul>
<h5 id="如何获取元素到文档顶部的距离"><a href="#如何获取元素到文档顶部的距离" class="headerlink" title="如何获取元素到文档顶部的距离"></a>如何获取元素到文档顶部的距离</h5><p>1.offsetTop</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTop</span>(<span class="params">ele</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> top = ele.offsetTop;</span><br><span class="line">  <span class="keyword">var</span> parent = ele.offsetParent;</span><br><span class="line">  <span class="keyword">while</span>(parent)&#123;</span><br><span class="line">    top += parent.offsetTop;</span><br><span class="line">    parent = parent.offsetParent;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> top;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.getBoundingClientRect().top + offsetParent.scrollTop</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTop</span>(<span class="params">ele</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> top = ele.getBoundingClientRect().top;</span><br><span class="line">  <span class="keyword">var</span> parent = ele.offsetParent;</span><br><span class="line">  <span class="keyword">while</span>(parent)&#123;</span><br><span class="line">    top += parent.scrollTop;</span><br><span class="line">    parent = parent.offsetParent;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> top;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="判断一个元素是不是包含另一个元素"><a href="#判断一个元素是不是包含另一个元素" class="headerlink" title="判断一个元素是不是包含另一个元素"></a>判断一个元素是不是包含另一个元素</h5><p>parentele.contains(ele)</p>
<h3 id="原型-构造函数-实例"><a href="#原型-构造函数-实例" class="headerlink" title="原型/构造函数/实例"></a>原型/构造函数/实例</h3><ul>
<li>原型(prototype)：包含实例的构造函数和原型方法的对象，用于实现实例的属性继承。可以理解成对象的爹，每个JavaScript对象中都包含一个<strong>proto</strong> (非标准)的属性指向它爹(该对象的原型)，可obj.<strong>proto</strong>进行访问。</li>
<li>构造函数：可以通过new来 新建一个对象 的函数，每个函数都可以是构造函数。一般构造函数的首字母大写 构造函数的prototype也指向原型 构造函数的<em>proto</em>指向函数原型。</li>
<li>实例：通过构造函数new出来的对象 实例的<em>proto</em>指向原型 实例的constructor指向构造函数 构造函数的prototype也指向原型 原型的constructor只想构造函数</li>
</ul>
<h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><p>原型链由原型对象组成，每个对象都有<em>proto</em>属性，指向创建该对象的构造函数的原型，<em>proto</em>属性把对象链接组成原型链，是一个用来实现继承和共享属性的有限的对象链。</p>
<ul>
<li>属性查找机制：当查找对象的属性时，如果实例上不存在该对象，则沿着原型链往上一级查找，找到则输出否则继续往上一级查找，直到顶级原型对象Object.prototype，没有则返回undefined</li>
<li>属性修改机制：只会修改该实例的属性，没有则添加该属性，如果需要修改原型的属性时，则可以用: b.prototype.x = 2；但是这样会造成所有继承于该对象的实例的属性发生改变。</li>
</ul>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><p>作用域其实可理解为该上下文中<em>声明的变量和声明的作用范围</em>。可分为<em>块级作用域</em> 和 <em>函数作用域</em>。</p>
<h4 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h4><ul>
<li>声明提前: 一个声明在函数体内都是可见的, 函数优先于变量</li>
<li>非匿名自执行函数，函数变量为 只读 状态，无法修改</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const foo = 1</span><br><span class="line">(<span class="keyword">function</span> <span class="function"><span class="title">foo</span></span>() &#123;</span><br><span class="line">    foo = 10  // 由于foo在函数中只为可读，因此赋值无效</span><br><span class="line">    console.log(foo)</span><br><span class="line">&#125;())</span><br><span class="line"></span><br><span class="line">// 结果打印：  ƒ <span class="function"><span class="title">foo</span></span>() &#123; foo = 10 ; console.log(foo) &#125;</span><br></pre></td></tr></table></figure>
<h3 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h3><p>作用域链可以理解为一组对象列表，包含<em>父级和自身的变量对象</em>，因此我们便能通过作用域链访问到父级里声明的变量或者函数。</p>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>闭包：当函数A被摧毁的情况下，返回出的子函数中依然保存着父级的变量和作用域，因此可以访问父函数的变量对象，这样的函数叫做闭包。<br>应用：函数柯里化、第三方库(避免全局污染)</p>
<h4 id="经典问题"><a href="#经典问题" class="headerlink" title="经典问题"></a>经典问题</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(var i=0;i&lt;6;i++)&#123;</span><br><span class="line">  setTimeOUt(()=&gt;&#123;</span><br><span class="line">    console.log(i)  //setTimeOut是异步函数会在循环结束后执行 这时所以i是6</span><br><span class="line">  &#125;,i*1000)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="解决办法1-闭包"><a href="#解决办法1-闭包" class="headerlink" title="解决办法1 闭包"></a>解决办法1 闭包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(var i=0;i&lt;6;i++)&#123;</span><br><span class="line">  (<span class="keyword">function</span>(j) &#123;</span><br><span class="line">    setTimeOUt(()=&gt;&#123;</span><br><span class="line">      console.log(j)</span><br><span class="line">    &#125;,j*1000)</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="解决办法2-setTimeout第三个参数"><a href="#解决办法2-setTimeout第三个参数" class="headerlink" title="解决办法2 setTimeout第三个参数"></a>解决办法2 setTimeout第三个参数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">i</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">  &#125;,i*<span class="number">1000</span>,i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="解决办法2-let创建块级作用域"><a href="#解决办法2-let创建块级作用域" class="headerlink" title="解决办法2 let创建块级作用域"></a>解决办法2 let创建块级作用域</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">  &#125;,i*<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="script引入方式"><a href="#script引入方式" class="headerlink" title="script引入方式"></a>script引入方式</h3><ul>
<li>script 标签静态引入 遇到标签加载并执行</li>
<li>js 动态插入</li>
<li>script async 与后面元素并行（加载并执行，加载完就执行，并不按声明顺序）</li>
<li>script defer 与后面元素并行 (加载但不执行，等所以元素解析完后执行，DOMContentLoaded事件触发前执行，按声明顺序执行)</li>
</ul>
<h3 id="拷贝"><a href="#拷贝" class="headerlink" title="拷贝"></a>拷贝</h3><h4 id="浅拷贝-只会拷贝第一层，深层的修改依然会有影响"><a href="#浅拷贝-只会拷贝第一层，深层的修改依然会有影响" class="headerlink" title="浅拷贝: 只会拷贝第一层，深层的修改依然会有影响"></a>浅拷贝: 只会拷贝第一层，深层的修改依然会有影响</h4><ul>
<li>Object.assign({},obj);</li>
<li>…展开符</li>
</ul>
<h3 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h3><ul>
<li>JSON.parse(JSON.stringify(obj)): 性能最快 （值为函数或undefined时，无法拷贝）</li>
<li>递归</li>
</ul>
<h3 id="new运算符的执行过程"><a href="#new运算符的执行过程" class="headerlink" title="new运算符的执行过程"></a>new运算符的执行过程</h3><ul>
<li>新生成一个对象</li>
<li>新对象的<em>proto</em>指向构造函数的prototype</li>
<li>绑定this并执行构造函数</li>
<li>返回该对象</li>
</ul>
<h3 id="继承的方式"><a href="#继承的方式" class="headerlink" title="继承的方式"></a>继承的方式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Anmail</span></span>()&#123;</span><br><span class="line">  this.specil = <span class="string">'动物‘</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>父对象构造函数绑定：使用call或apply方法，将父对象的构造函数绑定在子对象上，即在子对象构造函数中加一行：</li>
</ul>
<p>缺点：</p>
<ul>
<li>只能继承属性，不能继承原型方法</li>
<li>无法实现复用，每个子类都有父类实例函数的副本，影响性能</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">  Anmail.call(<span class="keyword">this</span>,<span class="built_in">arguments</span>)</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> cat1 = <span class="keyword">new</span> Cat(<span class="string">"大毛"</span>,<span class="string">"黄色"</span>);</span><br><span class="line">alert(cat1.species); <span class="comment">// 动物</span></span><br></pre></td></tr></table></figure>
<ul>
<li>修改prototype指向：把子对象的prototype指向父对象的实例，则有了父对象的属性，但只能为静态</li>
</ul>
<p>缺点：<strong>(实例对引用类型的修改会影响原数据)</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Cat.prototype = <span class="keyword">new</span> Anmail();</span><br><span class="line">Cat.prototype.constructor = Cat; <span class="comment">//最后把子对象构造函数指向本身</span></span><br></pre></td></tr></table></figure>
<ul>
<li>直接继承prototype：把子对象的prototype指向父对象的prototype</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Cat.prototype = Anmail.prototype;</span><br><span class="line">Cat.prototype.constructor = Cat; <span class="comment">//会修改Anmail对象的构造函数指向</span></span><br></pre></td></tr></table></figure>
<ul>
<li>利用空对象作为中介:对直接继承的修改</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> F = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">F.prototype= Anmail.prototype;</span><br><span class="line">Cat.prototype = <span class="keyword">new</span> F();</span><br><span class="line">Cat.prototype.constructor = Cat;</span><br><span class="line">Cat.uber = Parent.prototype; <span class="comment">//为了实现继承的完备性 指向父级的prototype</span></span><br></pre></td></tr></table></figure>
<ul>
<li>拷贝继承</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">parent,child</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> p = parent.prototype;</span><br><span class="line">  <span class="keyword">var</span> c = parent.prototype;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> p)&#123;</span><br><span class="line">    c[i] = p[i]</span><br><span class="line">  &#125;</span><br><span class="line">  c.uber = p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Es6 class 继承</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Anmail</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="隐式类型转换"><a href="#隐式类型转换" class="headerlink" title="隐式类型转换"></a>隐式类型转换</h3><ul>
<li>除+以外的运算都先转为数值</li>
<li>+有一端为字符串则都转完字符串 否则为数值</li>
<li>[1].toString === ‘1’   先转为数值再转为字符串</li>
<li>var a = {} a.toString() === ‘[object object]’  </li>
</ul>
<h3 id="类型判断"><a href="#类型判断" class="headerlink" title="类型判断"></a>类型判断</h3><ul>
<li><p>Object.prototype.toString.call(obj): 原理：调用Object的原型的toString方法（返回对象的具体类型）</p>
</li>
<li><p>typeof：是对对象的二进制进行区分的  因为不同对象的在底层表示为二进制的不同  这也是为什么typeof null===‘object’的原因</p>
</li>
<li><p>instance：是在该对象的原型链上进行查找是否有与之匹配的原型对象</p>
</li>
</ul>
<h3 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h3><ul>
<li>Es6： import/export</li>
<li>commonjs：require/exports/module.export</li>
</ul>
<h4 id="require和import的区别"><a href="#require和import的区别" class="headerlink" title="require和import的区别"></a>require和import的区别</h4><ul>
<li>require支持<em>动态导入</em>，import不支持，正在提案(babel 下可支持)</li>
<li>require是<em>同步导入</em>，import属于<em>异步导入</em> （require执行时导入，import编译时导入）</li>
<li>require是<em>值拷贝</em>，导出值变化不会影响导入值；import指向<em>内存地址</em>，导入值会随导出值而变化 （但目前都是值拷贝，babel最终也会把import转换为require）</li>
</ul>
<h3 id="防抖与节流"><a href="#防抖与节流" class="headerlink" title="防抖与节流"></a>防抖与节流</h3><p>防抖和节流是对<em>高频触发操作</em>的优化方式，会极大的提升性能</p>
<ul>
<li>防抖 (debounce): 将多次高频操作优化为只在最后一次调用执行，通常使用的场景是：用户输入，只需在输入完成后做一次输入校验即可。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fun,wait=<span class="number">5000</span>,immediately=true</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> timer,context,args;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...arumens</span>)</span>&#123;</span><br><span class="line">    context = <span class="keyword">this</span>;</span><br><span class="line">    args = arumens;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(immediately &amp;&amp; !timer)&#123;</span><br><span class="line">      fn.apply(context,args)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(timer) clearTimeout(timer);</span><br><span class="line"></span><br><span class="line">    timer = setTimerOut(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      timer = <span class="literal">null</span>;</span><br><span class="line">      fun.apply(context,args);</span><br><span class="line">    &#125;,wait)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>节流 (throttle): 每隔一段时间后执行一次，也就是降低频率，将高频操作优化成低频操作，通常使用场景: 滚动条事件 或者 resize 事件，通常每隔 100~500 ms执行一次即可。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">func,wait=<span class="number">5000</span>,immediately=true</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer,context,args,first=immediately;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...arguments</span>)</span>&#123;</span><br><span class="line">    context = <span class="keyword">this</span>;</span><br><span class="line">    args = <span class="built_in">arguments</span>;</span><br><span class="line">    <span class="keyword">if</span>(first)&#123;</span><br><span class="line">      fn.apply(context,args);</span><br><span class="line">      first=<span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!timer)&#123;</span><br><span class="line">      timer = setTimeOut(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        timer=<span class="literal">null</span>;</span><br><span class="line">        fn.apply(context,args)</span><br><span class="line">      &#125;,wait)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="回流和重绘"><a href="#回流和重绘" class="headerlink" title="回流和重绘"></a>回流和重绘</h3><p><strong>当js操作dom时，会引发js引擎与渲染引擎的交互，多次的交互极大的损失性能，所以现代框架中虚拟dom来模拟，多次的操作合并为一次。当元素的样式发生变化时，浏览器需要触发更新，重新绘制元素。这个过程中，有两种类型的操作，即重绘与回流。</strong></p>
<ul>
<li>重绘(repaint):当元素的样式改变而不影响布局时，浏览器将使用重绘对元素进行更新，只是UI变现层的更新，因此<strong>损耗较少</strong></li>
<li>回流(reflow):当元素的尺寸、结构或属性发生改变时，引发浏览器的重新渲染，称之为回流。浏览器需要重新计算，计算后还要重新布局，然后GPU绘制页面，因此对性能损耗较大，这也是性能优化重要的一点<ul>
<li>容易引发回流的操作<ul>
<li>页面初次渲染</li>
<li>浏览器窗口大小改变</li>
<li>元素尺寸、位置、内容发生改变</li>
<li>元素字体大小变化</li>
<li>添加或者删除可见的 dom 元素</li>
<li>激活 CSS 伪类（例如：:hover）</li>
<li>查询某些属性或调用某些方法</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>回流必定触发重绘，而重绘不一定触发回流，查询某些属性或调用某些方法</strong></p>
<ul>
<li>减少回流的css实践（优化性能）<ul>
<li>css<ul>
<li>避免使用display:table布局</li>
<li>将动画应用到脱离文档流的元素上(如absolute，fixed)</li>
</ul>
</li>
<li>js<ul>
<li>避免频繁操作样式，将多次汇总为一次</li>
<li>尽量用添加class进行修改</li>
<li>减少dom操作次数，可使用字符串一次插入进去</li>
<li>多次操作一个元素样式时，先display：none再操作</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="http-https"><a href="#http-https" class="headerlink" title="http/https"></a>http/https</h3><ul>
<li>http协议:<ul>
<li>1.0<ul>
<li>无法复用 完成就断开 需要重新连接和Tcp三次握手</li>
<li>head of line blocking 阻塞 导致请求之间影响</li>
</ul>
</li>
<li>1.1<ul>
<li>长连接keep-alive</li>
<li>断点续传</li>
<li>cache 缓存<ul>
<li>cache-control 设置最大缓存时间 优先</li>
<li>expires  过期时间判断</li>
<li>Last-Modified 最后一次修改时间</li>
<li>E-tag 文件唯一标示 优先</li>
</ul>
</li>
</ul>
</li>
<li>2.0<ul>
<li>多路复用</li>
<li>服务端推送(websocket)</li>
</ul>
</li>
</ul>
</li>
<li><p>https协议:</p>
<ul>
<li>证书(公钥)</li>
<li>ssl加密</li>
<li>443端口</li>
</ul>
</li>
<li><p>缓存策略：强缓存和协商缓存</p>
<ul>
<li>强缓存：浏览器判断缓存是否过期，没过期直接使用强缓存<ul>
<li>cache-control：设置最大缓存过期时间(秒) 优先于expires</li>
<li>expires：设置到期的时间(服务器时间) <strong>客户端可能和服务器时间不同</strong></li>
</ul>
</li>
<li>协商缓存：当缓存过期时，使用强缓存<ul>
<li>Last-Modified：最后一次修改时间 Last-Modified(response) &amp; If-Modified-Since (request，上一次返回的Last-Modified)<ul>
<li>如果一致，则直接返回 304 通知浏览器使用缓存</li>
<li>不一致 服务器返回新资源</li>
</ul>
</li>
<li>唯一标识方案：Etag(response 携带) &amp; If-None-Match(request携带，上一次返回的 Etag): 服务器判断资源是否被修改：<ul>
<li>修改了则返回新的资源</li>
<li>如果相同则返回304浏览器使用缓存</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="http状态码"><a href="#http状态码" class="headerlink" title="http状态码"></a>http状态码</h3><ul>
<li>1**：接受，继续处理</li>
<li>200：成功，并返回数据</li>
<li>201：已创建</li>
<li>202：已接受</li>
<li>203：成功，并返回数据</li>
<li>204：成功，无内容</li>
<li>205：成功，重置内容</li>
<li>206：成功，部分内容</li>
<li>301：重定向</li>
<li>302：临时移动，可使用原url</li>
<li>304：资源未修改，可使用缓存</li>
<li>305：需要代理访问</li>
<li>400：语法错误</li>
<li>401：需要身份认证</li>
<li>403：拒绝请求</li>
<li>404：资源不存在</li>
<li>500：服务器错误</li>
</ul>
<h3 id="get-post区别"><a href="#get-post区别" class="headerlink" title="get/post区别"></a>get/post区别</h3><ul>
<li>get：可以被缓存/请求长度受限制(4k)/会被历史记录/不会修改资源</li>
<li>post：安全/数据传输大/更多编码类型</li>
</ul>
<h3 id="cookie和seesion和localstorage的区别"><a href="#cookie和seesion和localstorage的区别" class="headerlink" title="cookie和seesion和localstorage的区别"></a>cookie和seesion和localstorage的区别</h3><ul>
<li>时效性： cookie一般有过期时间 localstorage不清楚永远存在 seesion窗口打开期间</li>
<li>存储大小：coookie一般4K左右 localstorage session 5M左右</li>
<li>服务器交互：cookie会在交互时在请求头携带 其他不会</li>
</ul>
<h3 id="Node的EventLoop的6个阶段"><a href="#Node的EventLoop的6个阶段" class="headerlink" title="Node的EventLoop的6个阶段"></a>Node的EventLoop的6个阶段</h3><ul>
<li>timer阶段：执行到期的定时器setTimeout和setInterval的回掉</li>
<li>I/O阶段：执行上轮循环残留的callback</li>
</ul>
<p>-</p>
<h3 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h3><ul>
<li>JSONP：利用script标签不受限制的特点，但只支持get请求</li>
<li>设置CORS：Access-Control-Allow-Origin：*</li>
<li>postMessage：window.postMessage</li>
<li>设置domain：同一主域名下</li>
</ul>
<h3 id="script的src和img的src跨域的区别"><a href="#script的src和img的src跨域的区别" class="headerlink" title="script的src和img的src跨域的区别"></a>script的src和img的src跨域的区别</h3><p>原理是相同的，都是利用标签的src属性可以跨域请求的特点，但是具体的实现不同。<br>使用img标签不能访问服务器返回的响应内容，也就是说只能单向的发送get请求。<br>而使用script标签实现的jsonp跨域可以将服务器响应文本以函数参数的形式返回，浏览器解析js代码时直接就执行了。</p>
<h3 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h3><ul>
<li>XSS攻击：跨站脚本：利用浏览器的输入输出漏洞进行脚本攻击<ul>
<li>危害<ul>
<li>窃取cookie信息</li>
<li>监听用户行为</li>
<li>修改dom，伪造登录页面</li>
</ul>
</li>
<li>类型<ul>
<li>存储型：黑客输入脚本然后存入该站点数据库，用户访问时请求就包含了恶意脚本，执行就会被窃取用户信息</li>
<li>反射型：该类型不需要存储在数据库，恶意链接会携带js脚本，然后在页面中执行，触发恶意操作</li>
<li>基于DOM：通过手段修改dom，html传输中或使用中被劫持，然后修改dom</li>
</ul>
</li>
<li>防范<ul>
<li>重要数据httpOnly</li>
<li>对页面上的输入和输出内容进行转义或过滤</li>
<li>利用CSP（同源策略）：禁止加载或者执行其他域下的脚本</li>
</ul>
</li>
</ul>
</li>
<li>CSRFF：跨站伪装请求：访问第三方站点时，利用用户的登录态调取接口<ul>
<li>危害<ul>
<li>窃取cookie信息</li>
<li>伪装请求来让操作用户数据或财产</li>
</ul>
</li>
<li>类型<ul>
<li>伪造get请求（img\src等标签自动发起请求）</li>
<li>伪造post请求（表单自动提交）</li>
<li>吸引用户点击第三方站点链接</li>
</ul>
</li>
<li>防范<ul>
<li>get 不修改数据</li>
<li>禁止第三方网站发送cookie：设置cookit的sameSite（Strict|Lax|None）</li>
<li>CSRF Token：第一次请求下发CSRF Token、接口请求携带并校验</li>
<li>设置白名单，不被第三方请求</li>
<li>请求来源校验（origin、refer：安全原因有时候没有）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="虚拟dom-diff原理和实现"><a href="#虚拟dom-diff原理和实现" class="headerlink" title="虚拟dom diff原理和实现"></a>虚拟dom diff原理和实现</h3><ul>
<li>真实dom初始化为虚拟dom树</li>
<li>树的diff，深度遍历，添加索引(方便渲染差异)，同层对比 输出（diffList，diffchildren，diffprops）<ul>
<li>没有新的节点，返回</li>
<li>有新的节点，tagname和key相同，对比属性，遍历子节点<ul>
<li>对比属性(新旧属性列表)<ul>
<li>是否有删除属性</li>
<li>是否属性值修改</li>
<li>是否有新加属性</li>
</ul>
</li>
<li>对比列表(新旧列表)<ul>
<li>是否有删除</li>
<li>是否有新增</li>
<li>是否移动</li>
</ul>
</li>
</ul>
</li>
<li>tagname和key不同，直接替换该节点</li>
</ul>
</li>
<li><p>渲染差异：根据前后虚拟dom的差异节点渲染真实dom</p>
<ul>
<li>遍历patchs， 把需要更改的节点取出来</li>
<li>局部更新dom</li>
</ul>
</li>
<li><p>js模拟dom对象的实现</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Elemnet</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(tags,props,children,key)&#123;</span><br><span class="line">    <span class="keyword">this</span>.tags = tags;</span><br><span class="line">    <span class="keyword">this</span>.props = props;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">Array</span>.isArray(children))&#123;</span><br><span class="line">      <span class="keyword">this</span>.children = children</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(isString(children))&#123;</span><br><span class="line">      <span class="keyword">this</span>.key = children;</span><br><span class="line">      <span class="keyword">this</span>.children = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(key) <span class="keyword">this</span>.key = key;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render()&#123;</span><br><span class="line">    <span class="keyword">var</span> root = <span class="keyword">this</span>._createHtml(</span><br><span class="line">      <span class="keyword">this</span>.tags,</span><br><span class="line">      <span class="keyword">this</span>.props,</span><br><span class="line">      <span class="keyword">this</span>.children,</span><br><span class="line">      <span class="keyword">this</span>.key</span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(root)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  create()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._createHtml(</span><br><span class="line">      <span class="keyword">this</span>.tags,</span><br><span class="line">      <span class="keyword">this</span>.props,</span><br><span class="line">      <span class="keyword">this</span>.children,</span><br><span class="line">      <span class="keyword">this</span>.key</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _createHtml(tags,props,children,key)&#123;</span><br><span class="line">    <span class="keyword">let</span> el = <span class="built_in">document</span>.createElement(tags);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">const</span> key <span class="keyword">in</span> props)&#123;</span><br><span class="line">      <span class="keyword">if</span> (props.hasOwnProperty(key)) &#123;</span><br><span class="line">        <span class="keyword">let</span> value = props[key];</span><br><span class="line">        el.setAttribute(key,value)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(key) el.key = key</span><br><span class="line">    <span class="keyword">if</span>(children)&#123;</span><br><span class="line">      children.forEach(<span class="function"><span class="params">e</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> child;</span><br><span class="line">        <span class="keyword">if</span>(e instanceOf Element)&#123;</span><br><span class="line">          e = <span class="keyword">this</span>._createHtml(e)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          child = <span class="built_in">document</span>.createTextNode(e);</span><br><span class="line">        &#125;</span><br><span class="line">        el.appendChild(child)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> el</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="diff算法实现"><a href="#diff算法实现" class="headerlink" title="diff算法实现"></a>diff算法实现</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">diff</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>()&#123;</span><br><span class="line">    <span class="keyword">let</span> pathchs = &#123;&#125;; <span class="comment">//收集差异</span></span><br><span class="line">    difers(newTrees,oldTrees,<span class="number">0</span>,pathchs);</span><br><span class="line">    <span class="keyword">return</span> pathchs;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">difers</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="vue3-0中proxy相比于defineProperty的优点"><a href="#vue3-0中proxy相比于defineProperty的优点" class="headerlink" title="vue3.0中proxy相比于defineProperty的优点"></a>vue3.0中proxy相比于defineProperty的优点</h3><ul>
<li>defineProperty只能对属性进行劫持，所以需要深度遍历整个对象。proxy直接对整个对象进行拦截</li>
<li>不能监听到数组的变化  proxy原生支持监听数组</li>
</ul>
<h3 id="react-redux和mobx的区别"><a href="#react-redux和mobx的区别" class="headerlink" title="react-redux和mobx的区别"></a>react-redux和mobx的区别</h3><ul>
<li>mobx 入门更简单  redux相对较难</li>
<li>mobx异步更加方便  redux需要中间件来支持</li>
<li>mobx是对数据的引用 可直接修改数据的状态  redux 是immutable的思想 每次返回新的对象 需要数据流的方式去修改状态</li>
<li>正是因为这个 所以mobx更适合小项目 没有很多数据的管理 大型项目多人协作开发会容易引发冲突</li>
</ul>
<h3 id="for-in和for-of的区别"><a href="#for-in和for-of的区别" class="headerlink" title="for..in和for..of的区别"></a>for..in和for..of的区别</h3><ul>
<li>for..in：会对对象的key值进行遍历 如果是数组会遍历下标(多维数组不可遍历)  </li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">当给数组添加属性时，也会被遍历</span><br><span class="line"><span class="built_in">let</span> arr = [1,2,3];</span><br><span class="line">arr.name = <span class="string">'w'</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="built_in">let</span> i <span class="keyword">in</span> arr)&#123;</span><br><span class="line">  console.log(i)   //0,1,2,name</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>for..of：会对对象的值进行遍历 还可以通过下标拿到子属性的值 只会遍历集合本身元素</li>
</ul>
<h3 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h3><ul>
<li>&amp;位与运算</li>
</ul>
<p>1&amp;2 =&gt; 0001&amp;0010 =&gt; 0<br>15&amp;14 =&gt; 1111&amp;1110 =&gt; 1110  取都等于1的公共位</p>
<ul>
<li>&lt;&lt;位左移运算<br>1&lt;<2 => 0001左移两位 =&gt; 0100 =&gt; 4</2></li>
</ul>
<h3 id="模块化和组件化"><a href="#模块化和组件化" class="headerlink" title="模块化和组件化"></a>模块化和组件化</h3><ul>
<li>模块化：是从逻辑上的划分，考虑代码的组织</li>
<li>组件化：是从UI上的划分，考虑代码的复用</li>
</ul>
<h3 id="用户体验"><a href="#用户体验" class="headerlink" title="用户体验"></a>用户体验</h3><p>首先介绍一些用户体验的相关概念：</p>
<ul>
<li>主动交互：需要用户去点击去触发的一些操作产生的交互  比如点击</li>
<li>被动交互：不需要用户去操作 就可以在视觉上与用户产生交互 比如 开屏广告 动画 loading</li>
<li>刷新率：屏幕每秒钟刷新的频率，这是显示设备优劣的参考值之一 值越高屏幕的流畅性越高 用户体验越好</li>
<li>FPS：每秒钟往屏幕上传输的图像数量，玩游戏的朋友都应该知道这个东西，值低于60 会开始明显感觉到卡顿</li>
</ul>
<p>体验案例:苹果的通用页面 点击会延时进入下一个页面 而不会进去后显示一个loading  尽管那个loading很短 但很影响用户的体验性</p>
<h5 id="如何优化长任务"><a href="#如何优化长任务" class="headerlink" title="如何优化长任务"></a>如何优化长任务</h5><p>因为每一秒需要至少60帧的渲染频率，每一帧也就是16.7ms，所以为了用户体验，我们应避免长任务，尤其是超过运行超过10ms的任务，因为在每一帧还需要给浏览器渲染预留时间。</p>
<p>但是如果是超过10ms的长任务应该怎么办呢，有两种方案，Web Worker和Time Slicing</p>
<ul>
<li>Web Woker：就是重启一个线程来运行长任务，而避免主线程的阻塞，而导致浏览器卡死。但缺点是无法操作dom</li>
<li>Time Slicing：时间切片的概念，就是把长任务进行切割成多个执行时间很短的段任务，因为每个任务之间需要间隔，所以肯定比长任务时间长，但是基本可以做到用户无感知，例如react的Fiber调度系统，一个长任务可以被多次中断执行。</li>
</ul>
<h6 id="去渲染数据量超大的一个列表页如何优化"><a href="#去渲染数据量超大的一个列表页如何优化" class="headerlink" title="去渲染数据量超大的一个列表页如何优化"></a>去渲染数据量超大的一个列表页如何优化</h6><ul>
<li>时间切片：把一次渲染40000条数据切割成多次去渲染</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span>&lt;<span class="title">any</span>,<span class="title">any</span>&gt;</span>&#123;</span><br><span class="line">    state=&#123;</span><br><span class="line">       list: []</span><br><span class="line">    &#125;</span><br><span class="line">    handerClick=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.sliceTime(<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">40000</span>).fill(<span class="number">0</span>), <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    sliceTime=<span class="function">(<span class="params">list,times</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(times === <span class="number">400</span>) <span class="keyword">return</span> </span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> newList = list.slice( times*<span class="number">100</span> , (times + <span class="number">1</span>) * <span class="number">100</span> ) <span class="comment">/* 每次截取 100 个 */</span></span><br><span class="line">            <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">                list: <span class="keyword">this</span>.state.list.concat(newList)</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">this</span>.sliceTime( list ,times + <span class="number">1</span> )</span><br><span class="line">        &#125;, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; list &#125; = <span class="keyword">this</span>.state</span><br><span class="line">        <span class="keyword">return</span> &lt;div&gt;</span><br><span class="line">            &lt;button onClick=&#123; this.handerClick &#125; &gt;点击&lt;/button&gt;</span><br><span class="line">            &#123;</span><br><span class="line">                list.map((item,index)=&gt;&lt;li className="list"  key=&#123;index&#125; &gt;</span><br><span class="line">                    &#123; item  + '' + index &#125; Item</span><br><span class="line">                &lt;/li&gt;)</span><br><span class="line">            &#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>虚拟列表：lib:react-tiny-virtual-list</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//只渲染当前视口范围和缓存区内的数据，列表滚动时当前让渲染区域也进行滚动，根据滚动多少计算应该展示的渲染条目</span></span><br><span class="line"><span class="keyword">let</span> num  = <span class="number">0</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span>&lt;<span class="title">any</span>, <span class="title">any</span>&gt;</span>&#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        list: <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">9999</span>).fill(<span class="number">0</span>).map(<span class="function"><span class="params">()</span> =&gt;</span>&#123; </span><br><span class="line">            num++</span><br><span class="line">            <span class="keyword">return</span> num</span><br><span class="line">        &#125;),</span><br><span class="line">        scorllBoxHeight: <span class="number">500</span>, <span class="comment">/* 容器高度(初始化高度) */</span></span><br><span class="line">        renderList: [],       <span class="comment">/* 渲染列表 */</span></span><br><span class="line">        itemHeight: <span class="number">60</span>,       <span class="comment">/* 每一个列表高度 */</span></span><br><span class="line">        bufferCount: <span class="number">8</span>,       <span class="comment">/* 缓冲个数 上下四个 */</span></span><br><span class="line">        renderCount: <span class="number">0</span>,       <span class="comment">/* 渲染数量 */</span></span><br><span class="line">        start: <span class="number">0</span>,             <span class="comment">/* 起始索引 */</span></span><br><span class="line">        end: <span class="number">0</span>                <span class="comment">/* 终止索引 */</span></span><br><span class="line">    &#125;</span><br><span class="line">    listBox: any = <span class="literal">null</span></span><br><span class="line">    scrollBox : any = <span class="literal">null</span></span><br><span class="line">    scrollContent:any = <span class="literal">null</span></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; itemHeight, bufferCount &#125; = <span class="keyword">this</span>.state</span><br><span class="line">        <span class="comment">/* 计算容器高度 */</span></span><br><span class="line">        <span class="keyword">const</span> scorllBoxHeight = <span class="keyword">this</span>.listBox.offsetHeight</span><br><span class="line">        <span class="keyword">const</span> renderCount = <span class="built_in">Math</span>.ceil(scorllBoxHeight / itemHeight) + bufferCount</span><br><span class="line">        <span class="keyword">const</span> end = renderCount + <span class="number">1</span></span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            scorllBoxHeight,</span><br><span class="line">            end,</span><br><span class="line">            renderCount,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 处理滚动效果 */</span></span><br><span class="line">    handerScroll=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; scrollTop &#125; :any =  <span class="keyword">this</span>.scrollBox</span><br><span class="line">        <span class="keyword">const</span> &#123; itemHeight , renderCount &#125; = <span class="keyword">this</span>.state</span><br><span class="line">        <span class="keyword">const</span> currentOffset = scrollTop - (scrollTop % itemHeight)</span><br><span class="line">        <span class="comment">/* translate3d 开启css cpu 加速 */</span></span><br><span class="line">        <span class="keyword">this</span>.scrollContent.style.transform = <span class="string">`translate3d(0, <span class="subst">$&#123;currentOffset&#125;</span>px, 0)`</span></span><br><span class="line">        <span class="keyword">const</span> start = <span class="built_in">Math</span>.floor(scrollTop / itemHeight)</span><br><span class="line">        <span class="keyword">const</span> end = <span class="built_in">Math</span>.floor(scrollTop / itemHeight + renderCount + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            start,</span><br><span class="line">            end,</span><br><span class="line">       &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">/* 性能优化：只有在列表start 和 end 改变的时候在渲染列表 */</span></span><br><span class="line">    shouldComponentUpdate(_nextProps, _nextState)&#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; start , end &#125; = _nextState</span><br><span class="line">        <span class="keyword">return</span> start !== <span class="keyword">this</span>.state.start || end !==<span class="keyword">this</span>.state.end </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 处理滚动效果 */</span></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">1111</span>)</span><br><span class="line">        <span class="keyword">const</span> &#123; list, scorllBoxHeight, itemHeight ,start ,end &#125; = <span class="keyword">this</span>.state</span><br><span class="line">        <span class="keyword">const</span> renderList = list.slice(start,end)</span><br><span class="line">        <span class="keyword">return</span> &lt;div className="list_box"</span><br><span class="line">            ref=&#123;(node) =&gt; this.listBox = node&#125;</span><br><span class="line">        &gt;   </span><br><span class="line">            &lt;div  </span><br><span class="line">               style=&#123;&#123; height: scorllBoxHeight, overflow: 'scroll', position: 'relative' &#125;&#125;  </span><br><span class="line">               ref=&#123; (node)=&gt; this.scrollBox = node &#125;</span><br><span class="line">               onScroll=&#123; this.handerScroll &#125;   </span><br><span class="line">            &gt;</span><br><span class="line">                &#123; /* 占位作用 */&#125;</span><br><span class="line">                &lt;div style=&#123;&#123; height: `$&#123;list.length * itemHeight&#125;px`, position: 'absolute', left: 0, top: 0, right: 0 &#125;&#125; /&gt;</span><br><span class="line">                &#123; /* 显然区 */ &#125;</span><br><span class="line">                &lt;div ref=&#123;(node) =&gt; this.scrollContent = node&#125; style=&#123;&#123; position: 'relative', left: 0, top: 0, right: 0 &#125;&#125; &gt;</span><br><span class="line">                    &#123;</span><br><span class="line">                        renderList.map((item, index) =&gt; (</span><br><span class="line">                            &lt;div className="list" key=&#123;index&#125; &gt;</span><br><span class="line">                                &#123;item + '' &#125; Item</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                        ))</span><br><span class="line">                    &#125;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="react17"><a href="#react17" class="headerlink" title="react17"></a>react17</h5><p>重写调度器系统，把同步长任务变成异步短任务，把渲染分布到每一帧的空隙去执行</p>
<h4 id="instandof"><a href="#instandof" class="headerlink" title="instandof"></a>instandof</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">instanceNew</span>(<span class="params">obj, constructor</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = obj.__proto__;</span><br><span class="line">  <span class="keyword">while</span>(a)&#123;</span><br><span class="line">    <span class="keyword">if</span>(a === <span class="keyword">constructor</span>.prototype)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    a = a.__proto__;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="切片上传"><a href="#切片上传" class="headerlink" title="切片上传"></a>切片上传</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handleChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> file = e.target.files[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">var</span> start=<span class="number">0</span>,end=<span class="number">0</span>,chunks=[],chunkSize=<span class="number">2</span>*<span class="number">1024</span>*<span class="number">1024</span>;</span><br><span class="line">  <span class="keyword">if</span>(file.size &gt; chunkSize) &#123;</span><br><span class="line">      <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">          end+=chunkSize;</span><br><span class="line">          <span class="keyword">var</span> blob = file.slice(start,end);</span><br><span class="line">          start+=chunkSize;</span><br><span class="line">          </span><br><span class="line">          <span class="keyword">if</span>(!blob.size)&#123;<span class="comment">//截取的数据为空 则结束</span></span><br><span class="line">              <span class="comment">//拆分结束</span></span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          chunks.push(blob);<span class="comment">//保存分段数据</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      chunks.push(file)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(chunks);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="window-open"><a href="#window-open" class="headerlink" title="window.open"></a>window.open</h4><p><strong>当通过window.open打开一个窗口时，打开的窗口可以通过window.opener拿到父窗口的信息。这种可以用于子窗口在作出一些操作时，对父窗口进行一些回调操作。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///父窗口</span></span><br><span class="line"><span class="built_in">window</span>[<span class="string">'callback'</span>] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">111</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.open(<span class="string">'子窗口'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">///子窗口</span></span><br><span class="line"><span class="keyword">const</span> callback = <span class="built_in">window</span>.opener[<span class="string">'callback'</span>]; <span class="comment">//拿到父窗口回调方法</span></span><br><span class="line"><span class="comment">//do something</span></span><br><span class="line">callback()</span><br></pre></td></tr></table></figure>

        <p class="suffix-end">__END__</p>
        <div class="suffix-box">
            <div class="suffix-box-left">
                <img src="/logo.png" alt="webbHou">
            </div>
            <div class="suffix-box-right">
                <span class="suffix-box-title">文章作者</span>：webbHou
                <br>
                <span class="suffix-box-title">文章出处</span>：<a href="/2019/02/19/面试秘籍-原生js篇/" target="_blank">面试秘籍-原生js篇</a>
                <br>
                <span class="suffix-box-title">作者签名</span>：Think twice Code once
                <br>
                <span class="suffix-box-title">关于主题</span>：<a href="https://github.com/first19326/Hexo-LiveForCode" target="_blank">Hexo - Live For Code</a>
                <br>
                <span class="suffix-box-title">版权声明</span>：文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" title="BY-NC-SA" target="_blank">BY-NC-SA</a> 许可协议，转载请注明出处
                <br>
            </div>
            <div style="clear: both;"></div>
        </div>
    </div>
    <div class="article-footer">
        
            <div class="category">
                分类：
                
                    <a href="/categories/面试/">面试</a>
                
            </div>
        
        
            <div class="tag">
                标签：
                
                    <a href="/tags/javascript/">javascript</a>
                
            </div>
        
        <div class="article-prev-next">
            
                <a href="/2019/02/26/输入url到展示的过程/" class="prev-prefix">« </a> 上一篇：    <a href="/2019/02/26/输入url到展示的过程/" title="发布于 2019-02-26 10:04">输入url到展示的过程</a>
                <br>
            
            
                <a href="/2019/02/18/面试秘籍-htmlcss篇/" class="next-prefix">» </a> 下一篇：    <a href="/2019/02/18/面试秘籍-htmlcss篇/" title="发布于 2019-02-18 02:53">面试秘籍-htmlcss篇</a>
            
        </div>
    </div>
    
    <div class="article-comments">
        <div class="comments-title">
            评论列表
        </div>
        <div class="comments-content">
        </div>
    </div>

</div>

    </div>
</div>
    <div id="footer"></div>
    <div id="sidebar">
    <div class="menu-wrap" style="display:none;">
        <nav class="menu">
            <div class="menu-introduce"> 
                <div class="introduce-avatar"></div> 
                <div class="introduce-info"> 
                    <div class="introduce-user"><span></span></div>        
                </div> 
            </div> 
            <div class="menu-list">
                <ul></ul> 
            </div> 
            <div class="menu-link"></div> 
        </nav>
        <button class="menu-button-close"></button>
        <div class="morph-shape" id="morph-shape" data-morph-open="M-7.312,0H15c0,0,66,113.339,66,399.5C81,664.006,15,800,15,800H-7.312V0z;M-7.312,0H100c0,0,0,113.839,0,400c0,264.506,0,400,0,400H-7.312V0z">
            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewbox="0 0 100 800" preserveaspectratio="none">
                <path d="M-7.312,0H0c0,0,0,113.839,0,400c0,264.506,0,400,0,400h-7.312V0z"/>
            </svg>
        </div>
    </div>
    <button class="menu-button-open">MENU</button>
    <div class="menu-cover"></div>
</div>
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/search.css">
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/iscroll.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/instantsearch.min.js"></script>
<div class="search-window">
    <div class="search-content">
        <div class="search-content-icon">
            <i class="iconfont icon-search"></i>
        </div>
        <div id="search-input" class="search-input"></div>
    </div>

    <div class="search-scroll">
        <div class="search-result">
            <div id="search-stats" class="search-stats"></div>
            <div id="search-hits"></div>
            <div id="search-pagination" class="search-pagination"></div>
        </div>
    </div>

    <span class="search-close-icon">
        <i class="iconfont icon-close"></i>
    </span>
</div>
    <div id="tools">
    <div class="progressbar-top"></div>
    <div class="aplayer"></div>
    
        <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/APlayer.css">
        <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/APlayer.min.js"></script>
        <script type="text/javascript">
            const aplayer = new APlayer({
                container: document.querySelector(".aplayer"),
                fixed: true,
                autoplay: false,
                loop: "all",
                order: "random",
                preload: "auto",
                volume: 0.67,
                mutex: true,
                lrcType: 3,
                audio: [
                    
                        {
                            name: "aLIEz",
                            artist: "mizuki（瑞葵）",
                            cover: "/music/cover/aLIEz.jpg",
                            url: "/music/song/aLIEz.mp3",
                            lrc: "/music/lrc/aLIEz.lrc"
                        },
                    
                        {
                            name: "Endless Tears",
                            artist: "CLIFF EDGE",
                            cover: "/music/cover/Endless Tears.jpg",
                            url: "/music/song/Endless Tears.mp3",
                            lrc: "/music/lrc/Endless Tears.lrc"
                        },
                    
                        {
                            name: "Miracle",
                            artist: "Cascada",
                            cover: "/music/cover/Miracle.jpg",
                            url: "/music/song/Miracle.mp3",
                            lrc: "/music/lrc/Miracle.lrc"
                        },
                    
                        {
                            name: "Roll The Dice",
                            artist: "高珊",
                            cover: "/music/cover/Roll The Dice.jpg",
                            url: "/music/song/Roll The Dice.mp3",
                            lrc: "/music/lrc/Roll The Dice.lrc"
                        },
                    
                        {
                            name: "See You Again",
                            artist: "Charlie Puth, Wiz Khalifa",
                            cover: "/music/cover/See You Again.jpg",
                            url: "/music/song/See You Again.mp3",
                            lrc: "/music/lrc/See You Again.lrc"
                        },
                    
                ]
            });
        </script>
    
    
    <div class="wrap-right"></div>
    <div class="loading"></div>
</div>
    <script>
    window.config = {
        GitHubUserName     : 'first19326',
        GitHubRepositories : 'Hexo-LiveForCode',

        BlogUser      : 'webbHou',
        BlogAvatar    : '/logo.png',
        BlogStartDate : '2020-01-01',

        WebsiteTitleBlur         : '(◍´꒳`◍) Hi, Live For Code',
        WebsiteTitleBlurTimeOut  : 500,
        WebsiteTitleFocus        : '(*´∇｀*) 欢迎回来!',
        WebsiteTitleFocusTimeOut : 1000,
        WebsiteFavicon           : '/favicon.ico',

        ProgressBar: {
            id       : 'topProgressBar',
            color    : '#77B6FF',
            height   : '2px',
            duration : 0.2
        },

        Loading: {
            rebound: {
                tension  : 16,
                friction : 5
            },
            spinner: {
                id     : 'spinner',
                radius : 90,
                sides  : 3,
                depth  : 4,
                colors : {
                    background : '#F0F0F0',
                    stroke     : '#272633',
                    base       : '',
                    child      : '#272633'
                },
                alwaysForward : true,
                restAt        : 0.5,
                renderBase    : false
            }
        },

        HomeHeaderAnimationRendered : true,
        HomeHeaderAnimation         : {
            radius      : 15,
            density     : 0.2,
            color       : 'rgba(255, 255, 255, .2)',
            clearOffset : 0.3
        },

        ArticleHeaderAnimationRendered : false,
        ArticleHeaderAnimation         : {
            triW                  : 14,
            triH                  : 20,
            neighbours            : [
                
                    'side',
                
                    'top',
                
                    'bottom',
                
            ],
            speedTrailAppear      : 0.1,
            speedTrailDisappear   : 0.1,
            speedTriOpen          : 1,
            trailMaxLength        : 30,
            trailIntervalCreation : 100,
            delayBeforeDisappear  : 2,
            colors                : [
                
                    '#96EDA6',
                
                    '#5BC6A9',
                
                    '#38668C',
                
                    '#374D84',
                
                    '#BED5CB',
                
                    '#62ADC6',
                
                    '#8EE5DE',
                
                    '#304E7B',
                
            ]
        },

        BackAnimationRendered          : true,
        IEBrowserBackAnimationRendered : false,
        BackAnimation                  : {
            colorSaturation  : '60%',
            colorBrightness  : '50%',
            colorAlpha       : 0.5,
            colorCycleSpeed  : 5,
            verticalPosition : 'random',
            horizontalSpeed  : 200,
            ribbonCount      : 3,
            strokeSize       : 0,
            parallaxAmount   : -0.2,
            animateSections  : true
        },

        HomeHeaderImage : [
            
                'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/image/header/home.jpg',
            
                'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/image/header/home.jpeg',
            
        ],
        HomeBannerText  : '',

        ArticleHeaderImage : [
            
                'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/image/header/article.jpg',
            
        ],

        OtherBannerText : '',

        MenuList : [
            
                {
                    name   : '首页',
                    href   : '/',    
                    target : '',
                    class  : ''
                },
            
                {
                    name   : '标签',
                    href   : '/tag',    
                    target : '',
                    class  : ''
                },
            
                {
                    name   : '分类',
                    href   : '/category',    
                    target : '',
                    class  : ''
                },
            
                {
                    name   : '归档',
                    href   : '/archives',    
                    target : '',
                    class  : ''
                },
            
                {
                    name   : '关于',
                    href   : '/about',    
                    target : '',
                    class  : ''
                },
            
                {
                    name   : '订阅',
                    href   : '/atom.xml',    
                    target : '_blank',
                    class  : ''
                },
            
                {
                    name   : '搜索',
                    href   : '',    
                    target : '',
                    class  : 'search'
                },
            
        ],
        MenuLink : [
            
                
                    {
                        icon : 'icon-weibo', 
                        url  : ''
                    },
                
                    {
                        icon : 'icon-wechat', 
                        url  : ''
                    },
                
                    {
                        icon : 'icon-qq', 
                        url  : ''
                    },
                
                    {
                        icon : 'icon-github', 
                        url  : 'https://github.com/webbHou'
                    },
                
            
        ],

        FooterStyle : 2,
        BottomText  : {
            icon    : 'like-fill',
            left    : '最美的不是下雨天',
            right   : '是曾与你躲过雨的屋檐'
        },
        ThemeInfo   : true,

        ConsoleList : [
            
                
                    [
                        
                            
                                'Based on cnblogs theme SimpleMemory.',
                            
                                '',
                            
                        
                    ],
                
                    [
                        
                            
                                'SimpleMemory Author:',
                            
                                'BNDong',
                            
                        
                    ],
                
                    [
                        
                            
                                'Theme:',
                            
                                'LiveForCode',
                            
                        
                    ],
                
            
        ],

        FontIconExtend : '',

        Donate : {
            paypal  : '',
            bitcoin : '',
            alipay  : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/image/donate/alipay.png',
            wechat  : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/image/donate/wechat.png'
        },

        Code : {
            style : 'normal'
        },  

        Search : {
            applicationID : '010C3EANT8',
            apiKey        : 'c7abab9f11b79102b9aff7fe6d41447d',
            indexName     : 'Notes',
            hits          : {
                page : 10
            },
            labels        : {
                placeholder : '搜索',
                empty       : '未发现与 「${query}」 相关的内容',
                stats       : '${hits} 条相关条目，使用了 ${time} 毫秒',
            }
        }, 

        Valine : {
            switch         : true,
            el             : '.comments-content',
            appId          : 'srhKtvWPQTWYKh3qX8G8M7v0-gzGzoHsz',
            appKey         : '8uVSP1q6UlALVC5igYfIfv2h',
            placeholder    : '你是我一生只会遇见一次的惊喜...',
            avatar         : 'mm',
            meta           : 'nick,mail,link',
            requiredFields : 'nick,mail',
            pageSize       : 5,
            lang           : 'zh-cn',
            visitor        : true,
            enableQQ       : true
        },

        Tocbot : {
            switch                : true,
            tocSelector           : '.toc',
            contentSelector       : '.article-body',
            headingSelector       : 'h1, h2, h3, h4, h5',
            headingsOffset        : 0,
            scrollSmooth          : true,
            scrollSmoothOffset    : -5,
            positionFixedSelector : '.toc',
            positionFixedClass    : 'toc-fixed',
            fixedSidebarOffset    : '',
        },

        Require : {
            baseUrl     : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/',
            waitSeconds : 100
        },

        Music : {
            type : 'APlayer'
        },
        APlayer : {
            container : '.aplayer',
            fixed     : true,
            autoplay  : false,
            loop      : 'all',
            order     : 'random',
            preload   : 'auto',
            volume    : 0.67,
            mutex     : true,
            lrcType   : 3,
            audio     : [
                
                    {
                        name   : 'aLIEz',
                        artist : 'mizuki（瑞葵）',
                        cover  : '/music/cover/aLIEz.jpg',
                        url    : '/music/song/aLIEz.mp3',
                        lrc    : '/music/lrc/aLIEz.lrc'
                    },
                
                    {
                        name   : 'Endless Tears',
                        artist : 'CLIFF EDGE',
                        cover  : '/music/cover/Endless Tears.jpg',
                        url    : '/music/song/Endless Tears.mp3',
                        lrc    : '/music/lrc/Endless Tears.lrc'
                    },
                
                    {
                        name   : 'Miracle',
                        artist : 'Cascada',
                        cover  : '/music/cover/Miracle.jpg',
                        url    : '/music/song/Miracle.mp3',
                        lrc    : '/music/lrc/Miracle.lrc'
                    },
                
                    {
                        name   : 'Roll The Dice',
                        artist : '高珊',
                        cover  : '/music/cover/Roll The Dice.jpg',
                        url    : '/music/song/Roll The Dice.mp3',
                        lrc    : '/music/lrc/Roll The Dice.lrc'
                    },
                
                    {
                        name   : 'See You Again',
                        artist : 'Charlie Puth, Wiz Khalifa',
                        cover  : '/music/cover/See You Again.jpg',
                        url    : '/music/song/See You Again.mp3',
                        lrc    : '/music/lrc/See You Again.lrc'
                    },
                
            ]
        },
        Meting : {
            id       : '3778678', 
            lrcshow  : false, 
            server   : 'netease', 
            type     : 'playlist', 
            fixed    : true, 
            autoplay : false, 
            loop     : 'all', 
            order    : 'random', 
            preload  : 'auto', 
            volume   : 0.67, 
            mutex    : true
        },

        LazyLoad : {
            default : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/image/website/lazyload.svg'
        },
  
        Style : {
            aplayer          : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/APlayer.css',
            archive          : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/archive.css',
            donate           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/donate.css',
            fancybox         : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/jquery.fancybox.css',
            footer           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/footer.css',
            iconfont         : 'https://at.alicdn.com/t/font_1546312_l3yohatebw.css',
            index            : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/index.css',
            menuBubble       : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/menu-bubble.css',
            page             : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/page.css',
            post             : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/post.css',
            search           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/search.css',
            tocbot           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/tocbot.css',
            normal           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/normal.css',
            night            : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/night.css',
            clipboard        : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/clipboard.css'
        },

        Script: {
            aplayer          : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/APlayer.min.js',
            config           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/require.config.js',
            index            : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/index.js',
            instantSearch    : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/instantsearch.min.js',
            jQuery           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/jquery-3.4.1.min.js',
            loading          : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/loading.js',
            meting           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/Meting.min.js',
            iscroll          : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/iscroll.js',
            require          : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/require.min.js'
        },

        Font: {
            LongCang   : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/LongCang.css',
            Monda      : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/Monda.css',
            NotoSansSC : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/NotoSansSC.css',
            Playball   : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/Playball.css',
            PTMono     : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/PTMono.css',
            RobotoSlab : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/RobotoSlab.css',
            Rosario    : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/Rosario.css',
            UbuntuMono : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/UbuntuMono.css'
        },

        Suffix : {
            about : 'Think twice Code once'
        },
            
        Theme : {
            url  : 'https://github.com/first19326/Hexo-LiveForCode',
            name : 'Hexo - Live For Code'
        }  
    };
</script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/index.js"></script>
</body>
</html>
